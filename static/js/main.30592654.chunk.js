(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){},39:function(e,t,a){e.exports=a(95)},44:function(e,t,a){},79:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"yearCounts",function(){return S}),a.d(n,"countByType",function(){return P});var r=a(0),i=a.n(r),c=a(30),o=a.n(c),l=a(16),s=a(1),u=a(2),m=a(4),h=a(3),p=a(6),b=a(5);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return Object.keys(e).map(function(a){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e[a]);return n[t]=a,n})},v=function(){function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(Object(s.a)(this,e),this.loaded=!1,this.headerKey=n.bind(this),this.typeKey=r.bind(this),this.resourceDictionary=t,this.resourceArray=f(t),this.all=this.all.bind(this),this.dictionary=this.dictionary.bind(this),this.byId=this.byId.bind(this),this.filter=this.filter.bind(this),this.find=this.find.bind(this),this.handleData=this.handleData.bind(this),this.fireWhenLoaded=i.bind(this),this.hasLoaded=this.hasLoaded.bind(this),t.hasOwnProperty("fetch-data-url")){var c=t["fetch-data-url"];fetch(c).then(function(e){return e.json()}).then(function(e){return a.handleData(e)},function(e){console.error("Error loading data "+c,e)})}else this.handleData(t)}return Object(u.a)(e,[{key:"hasLoaded",value:function(){return this.loaded}},{key:"handleData",value:function(e){var t=this;Object.keys(e).forEach(function(a){var n=e[a];n.id=a,n.__header=t.headerKey(n),n.__type=t.typeKey(n)}),this.resourceDictionary=e,this.resourceArray=f(e),this.loaded=!0,this.fireWhenLoaded()}},{key:"dictionary",value:function(){return this.resourceDictionary}},{key:"all",value:function(){return this.resourceArray}},{key:"byId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",a=Object.assign({},this.dictionary()[e]);return a[t]=e,a}},{key:"filter",value:function(e){return this.all().filter(e)}},{key:"find",value:function(e){var t=this.filter(e);if(1===t.length)return t[0];if(t.length<1)throw new Error("Error: More than one result found matching criteria");if(t.length>0)throw new Error("Error: No results found")}}]),e}(),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},a=[];return e.filter(function(e){var n=t(e);return e?!(a.indexOf(n)>=0)&&(a.push(n),!0):null})},O=new(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e,function(e){return e.title},function(e){return"publication"}))).byAuthor=a.byAuthor.bind(Object(p.a)(a)),a.inFootnotes=a.inFootnotes.bind(Object(p.a)(a)),a.byResource=a.byResource.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"byAuthor",value:function(e){return this.filter(function(t){return t["author.id"]===e})}},{key:"inFootnotes",value:function(e){var t=this;return y(e.map(function(e){return t.byId(e["publication.id"])}))}},{key:"byResource",value:function(e){return this.inFootnotes(E.byResource(e))}}]),t}(v))({"fetch-data-url":"data/publication.json"}),j={publication:"publication",author:"author",footnote:"footnote",resource:"resource"},E=new(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e,function(e){return O.byId(e["publication.id"])},function(e){return j.footnote}))).byPublication=a.byPublication.bind(Object(p.a)(a)),a.byAuthor=a.byAuthor.bind(Object(p.a)(a)),a.byResource=a.byResource.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"byPublication",value:function(e){return this.filter(function(t){return t["publication.id"]===e})}},{key:"byResource",value:function(e){return this.filter(function(t){return t["resource.id"]===e})}},{key:"byAuthor",value:function(e){var t=this,a=[];return O.byAuthor(e).forEach(function(e){a=a.concat(t.byPublication(e.id))}),a}}]),t}(v))({"fetch-data-url":"data/footnote.json"}),g=new(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e,function(e){return e.title},function(e){return"resource"}))).citedByAuthor=a.citedByAuthor.bind(Object(p.a)(a)),a.inFootnotes=a.inFootnotes.bind(Object(p.a)(a)),a.byPublication=a.byPublication.bind(Object(p.a)(a)),a.citedByAuthor=a.citedByAuthor.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"inFootnotes",value:function(e){var t=this;return y(e.map(function(e){return t.byId(e["resource.id"])}))}},{key:"byPublication",value:function(e){return this.inFootnotes(E.byPublication(e))}},{key:"citedByAuthor",value:function(e){return this.inFootnotes(E.byAuthor(e))}}]),t}(v))({"fetch-data-url":"data/resource.json"}),k=new v({"fetch-data-url":"data/author.json"},function(e){return e.name},function(e){return j.author}),N=a(38),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).dict={},a.ks=[],a.add=a.add.bind(Object(p.a)(a)),a.addArray=a.addArray.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"add",value:function(e,t){t||(t=e),this.ks.indexOf(String(e))>=0||(this.dict[e]=t,this.ks=Object.keys(this.dict),this.push(t))}},{key:"addArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},a=0;a<e.length;a++)this.add(t(e[a]),e[a])}}]),t}(Object(N.a)(Array));function S(e){var t={};return e.forEach(function(e){Number(e.date)&&4===String(e.date).length&&(t[e.date]||(t[e.date]={count:0,label:e.date}),t[e.date].count+=1)}),t=Object.keys(t).map(function(e){return t[e]})}function P(e){var t={publication:0,footnote:0,resource:0,author:0};return e.forEach(function(e){t[e.__type]||(t[e.__type]=0),t[e.__type]+=1}),t}var C={author:k,footnote:E,publication:O,resource:g,search:function(e){var t=(e=e||{}).toggles||{},a=e.searchTerm||"",n=new w;function r(e,n,r){return!0!==t[e]?[]:r.filter(function(e){var t=n(e);return a.trim().length<1||!!t&&!!(t.toLowerCase().indexOf(a.toLowerCase())>=0)})}return n.addArray(r("author",function(e){return e.name},k),function(e){return"author."+e.id}),n.addArray(r("publication",function(e){return k.byId(e["author.id"]).name},O),function(e){return"publication."+e.id}),n.addArray(r("resource",function(e){return e.title},g),function(e){return"resource."+e.id}),n.addArray(r("publication",function(e){return e.title},O),function(e){return"publication."+e.id}),n},summarize:n},I=a(9),A=(a(25),a(44),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{onClick:this.props.onClick,className:"Button"},this.props.text)}}]),t}(i.a.Component)),D=localStorage,T={};function _(){try{D.setItem("canary",Date.now()),D.removeItem("canary")}catch(e){return!1}return!0}function F(e){return"yale-fortunoff-cdb-"+e}function x(e){if(!_())return[];var t=D.getItem(F(e));if(!t)return[];try{return JSON.parse(t)}catch(a){return[]}}function B(e,t){_()&&(D.setItem(F(e),JSON.stringify(t)),Object.keys(T).forEach(function(e){return T[e]()}))}function L(e,t){T[e]=t}function R(e,t){var a=x(e);a.indexOf(t)>=0||(a.push(t),B(e,a))}function H(e,t){B(e,x(e).filter(function(e){return e!==t}))}var M={resource:"resource",publication:"publication",author:"author"};function W(){return x(M.author).map(function(e){return C.author.byId(e)})}function z(){return x(M.publication).map(function(e){return C.publication.byId(e)})}function J(){return x(M.resource).map(function(e){return C.resource.byId(e)})}function K(e){R(M.resource,e)}function Y(e){R(M.publication,e)}function U(e){R(M.author,e)}function G(e){H(M.resource,e)}function V(e){H(M.publication,e)}function $(e){H(M.author,e)}var q=function(e){function t(e){var a;if(Object(s.a)(this,t),"resource"===(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).props.type)a.saveItem=K,a.removeItem=G,a.getSavedItems=J;else if("author"===a.props.type)a.saveItem=U,a.removeItem=$,a.getSavedItems=W;else{if("publication"!==a.props.type)return Object(m.a)(a);a.saveItem=Y,a.removeItem=V,a.getSavedItems=z}return a.isSaved=a.isSaved.bind(Object(p.a)(a)),a.state={isSaved:a.isSaved()},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"isSaved",value:function(){return this.getSavedItems().map(function(e){return e.id}).indexOf(this.props.id)>=0}},{key:"setSaved",value:function(){this.setState({isSaved:this.isSaved()})}},{key:"render",value:function(){var e=this;return["publication","author","resource"].indexOf(this.props.type)<0?null:i.a.createElement("div",{className:"SaveButton ".concat(this.state.isSaved?"unsave":"save")},this.isSaved()?i.a.createElement(A,{onClick:function(){e.removeItem(e.props.id),e.setSaved()},text:"unpin"}):i.a.createElement(A,{onClick:function(){e.saveItem(e.props.id),e.setSaved()},text:"pin"}))}}]),t}(i.a.Component),Q=a(13),X=a.n(Q),Z=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"pill-tray-wrapper ".concat(this.props.title)},i.a.createElement("div",{className:"pill-tray"},i.a.createElement("div",{className:"pill-tray-title"},this.props.items.length," ",this.props.title),this.props.items.slice(0,5).map(function(e,t){return i.a.createElement("div",{key:t,className:"pill"},i.a.createElement(I.b,{to:e.link},e.title))})))}}]),t}(i.a.Component),ee=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.type+"s";if(this.props.type===j.footnote){var t=this.props.item,a=C.resource.byId(this.props.item["resource.id"]);return i.a.createElement("div",{className:"HeaderLink"},i.a.createElement("div",null,a.title," ",t.start_time?"@".concat(t.start_time):null))}return i.a.createElement(I.b,{to:"/".concat(e,"/").concat(this.props.item.id)},this.props.header)}}]),t}(i.a.Component),te=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ItemHeader"},i.a.createElement("div",{className:"badge result-type"},"[",this.props.type,"]")," ",i.a.createElement(ee,this.props))}}]),t}(i.a.Component),ae=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,this.props.item.text?'"'.concat(this.props.item.text,'"'):null,i.a.createElement("div",null,i.a.createElement("span",{className:"metadata light"},this.props.item.chapter?"".concat(this.props.item.chapter,", "):null),i.a.createElement("span",{className:"metadata light"},this.props.item.page?"page ".concat(this.props.item.page," "):null)))}}]),t}(i.a.Component),ne=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=C.publication.byAuthor(this.props.item.id),t=C.resource.citedByAuthor(this.props.item.id);return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(Z,{title:X()("publications",e.length),items:e.map(function(e){return{title:e.title,link:"/publications/".concat(e.id)}})})),i.a.createElement("div",null,i.a.createElement(Z,{title:X()("resource",t.length)+" cited",items:t.map(function(e){return{title:e.title,link:"/resources/".concat(e.id)}})})))}}]),t}(i.a.Component),re=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=C.footnote.byResource(this.props.item.id),t=C.publication.inFootnotes(e);return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("span",{className:"metadata light"},this.props.item.id)),i.a.createElement("div",null,i.a.createElement(Z,{title:X()("publication",t.length),items:t.map(function(e){return{title:e.title,link:"/publications/".concat(e.id)}})})))}}]),t}(i.a.Component),ie=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.item,t=C.author.byId(this.props.item["author.id"])||{},a=C.resource.byPublication(this.props.item.id);return i.a.createElement("div",null,i.a.createElement("div",null,t.name?i.a.createElement("span",{className:"metadata"},i.a.createElement(I.b,{to:"/authors/".concat(t.id)},t.name)):null,e.publisher?i.a.createElement("span",{className:"metadata light"},", ",e.publisher):null,e.date?i.a.createElement("span",{className:"metadata light"},", ",e.date):null),i.a.createElement("div",null,i.a.createElement(Z,{title:X()("testimony",a.length)+" cited",items:a.map(function(e){return{title:e.title,link:"/resources/".concat(e.id)}})})))}}]),t}(i.a.Component),ce=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return"author"===this.props.type?i.a.createElement(ne,this.props):"publication"===this.props.type?i.a.createElement(ie,this.props):"resource"===this.props.type?i.a.createElement(re,this.props):"footnote"===this.props.type?i.a.createElement(ae,this.props):i.a.createElement("div",{className:"Footer"})}}]),t}(i.a.Component),oe=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ResultListItem ".concat(this.props.type)},i.a.createElement("div",{className:"content-area"},i.a.createElement("header",null,i.a.createElement(te,this.props)),i.a.createElement("footer",null,i.a.createElement(ce,this.props))),"footnote"===this.props.type?i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.props.item.uri},i.a.createElement(A,{text:"View"})):null,i.a.createElement(q,{type:this.props.type,id:this.props.item.id}))}}]),t}(i.a.Component),le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={itemCount:25,step:10},a.loadMore=a.loadMore.bind(Object(p.a)(a)),a.trackScrolling=a.trackScrolling.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"decideToIncrement",value:function(e){this.props.items.length>this.state.itemCount&&e<100&&this.loadMore()}},{key:"trackScrolling",value:function(){var e=window.pageYOffset+window.innerHeight,t=window.document.body.offsetHeight-e;this.decideToIncrement(t)}},{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.trackScrolling)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.trackScrolling)}},{key:"loadMore",value:function(){var e=this.state.itemCount+this.state.step;this.setState({itemCount:e})}},{key:"render",value:function(){var e=this.props.items.sort(function(e,t){return e.__header>t.__header?1:-1}).map(function(e,t){return i.a.createElement(oe,{key:t,item:e,type:e.__type,header:e.__header})}).slice(0,this.state.itemCount);return i.a.createElement("div",{className:"ResultList"},e)}}]),t}(i.a.Component),se=a(33),ue=(a(79),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{onClick:this.props.handleClick,className:"ToggleButton ".concat(this.props.label," ").concat(this.props.status?"on":"off")},i.a.createElement(A,{text:this.props.label}))}}]),t}(i.a.Component)),me=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("section",{className:"SearchArea column-wrapper"},i.a.createElement(se.TextInput,{callback:this.props.callback,value:this.props.value,placeholder:"Search by author, publication title or testimony..."})),i.a.createElement("section",{className:"toggle-box column-wrapper"},i.a.createElement("div",{className:"label"}),this.props.toggles.map(function(e,t){return i.a.createElement(ue,{key:t,handleClick:e.handler,label:e.label,status:e.status})})))}}]),t}(i.a.Component),he=a(34),pe=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=C.summarize.yearCounts(this.props.items.filter(function(e){return"publication"===e.__type}));return e.length<1?null:i.a.createElement("div",{className:"PublicationHistogram"},i.a.createElement(he.Histogram,{data:e,minYear:1980,maxYear:2020,margin:{top:10,left:30,right:10,bottom:20}}),i.a.createElement("h6",{className:"center"},"Publications by year"))}}]),t}(i.a.Component),be=a(14),de=a(37),fe=function(){var e=function(){return W().length+z().length+J().length},t=Object(r.useState)(e()),a=Object(de.a)(t,2),n=a[0],c=a[1];return L("counter",function(){c(e())}),i.a.createElement(i.a.Fragment,null,n>0?i.a.createElement(I.b,{className:"PinsButton",to:"/pins"},i.a.createElement(A,{text:X()("pin",n,!0)})):null)};function ve(e){var t=Object(be.e)(function(e){return"/"===e.location.pathname?null:i.a.createElement(I.b,{className:"HomeButton",to:"/"},i.a.createElement(A,{text:"home"}))}),a=e.id,n=e.saveType||"invalid";return i.a.createElement("nav",{className:"BreadCrumb"},i.a.createElement("div",{className:"breadcrumb-left"},i.a.createElement(t,null),i.a.createElement(fe,null)),i.a.createElement(q,{id:a,type:n}))}function ye(e,t){return i.a.createElement("div",{className:"top-matter-wrapper"},i.a.createElement("div",{className:"top-matter-inner column-wrapper"},i.a.createElement(ve,t),i.a.createElement("section",{className:"top-matter"},e)))}a(87);function Oe(e){return i.a.createElement("div",{className:"BigNumber ".concat(e.label)},i.a.createElement("div",{className:"number"},e.value),i.a.createElement("div",{className:"label"},X()(e.label,e.value)))}function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={searchTerm:"",toggles:{resource:!0,publication:!0,author:!0}},a.toggleFactory=a.toggleFactory.bind(Object(p.a)(a)),a.setSearchTerm=a.setSearchTerm.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setSearchTerm",value:function(e){this.setState({searchTerm:e})}},{key:"toggleFactory",value:function(e){var t=this;return function(){var a=Ee({},t.state,{toggles:Ee({},t.state.toggles)});a.toggles[e]=!t.state.toggles[e],t.setState(a)}}},{key:"render",value:function(){var e=this,t=C.search(this.state),a=C.summarize.countByType(t);return i.a.createElement("div",{className:"HomePage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement(pe,{items:t})),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"testimonies",value:a.resource}),i.a.createElement(Oe,{label:"publications",value:a.publication}),i.a.createElement(Oe,{label:"authors",value:a.author})))),{id:null}),i.a.createElement(me,{callback:this.setSearchTerm,value:this.state.searchTerm,toggles:Object.keys(this.state.toggles).map(function(t){return{label:t+"s",handler:e.toggleFactory(t),status:e.state.toggles[t]}})}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:t})))}}]),t}(i.a.Component),ke=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id,t=C.publication.byId(e),a=[C.author.byId(t["author.id"])],n=C.footnote.byPublication(e),r=n.length,c=y(C.resource.inFootnotes(n).map(function(e){return e.id})).length;return i.a.createElement("div",{className:"PublicationPage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},t.title),i.a.createElement("div",{className:"chunk"},a.map(function(e,t){return i.a.createElement("span",{key:t,className:"metadata"},i.a.createElement(I.b,{to:"/authors/".concat(e.id)},e.name?"".concat(e.name):null),"; ")}),i.a.createElement("span",{className:"metadata"},t.publisher?"".concat(t.publisher):null),i.a.createElement("span",{className:"metadata light"},t.date?", ".concat(t.date):null)),i.a.createElement("div",{className:"metadata light"},t.uri?i.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.uri},"Publication page"):null)),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"citations",value:r}),i.a.createElement(Oe,{label:"testimonies",value:c})))),{id:e,saveType:"publication"}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:n})))}}]),t}(i.a.Component),Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props.match.params.id,a=C.resource.dictionary()[t];if(!a)return e=this.props.location.pathname,i.a.createElement("div",null,i.a.createElement("h1",null,"No match found for '",e,"'"),i.a.createElement("p",null,"This is a 404"));var n=C.publication.byResource(t),r=C.footnote.byResource(t);return console.log("Footnotes",r),i.a.createElement("div",{className:"ResourcePage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},a.title),i.a.createElement("div",{className:"chunk metadata"},a.id)),i.a.createElement("div",{className:"right"},i.a.createElement(pe,{items:n}),i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"citations",value:r.length}),i.a.createElement(Oe,{label:"publications",value:n.length})))),{id:t,saveType:"resource"}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:n})))}}]),t}(i.a.Component),we=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id,t=C.publication.byId(e),a=C.author.byId(t.id),n=C.publication.byAuthor(e),r=C.footnote.byAuthor(e);return i.a.createElement("div",{className:"PublicationPage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},a.name)),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"publications",labelSingular:"publication",value:n.length}),i.a.createElement(Oe,{label:"citations",labelSingular:"citation",value:r.length})))),{id:e,saveType:"author"}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:n})))}}]),t}(i.a.Component);function Se(e){return function(t){return i.a.createElement("div",{className:"GenericPage"},i.a.createElement(e,t))}}var Pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={publications:z(),authors:W(),resources:J()},a.updateCounts=a.updateCounts.bind(Object(p.a)(a)),a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){L("saved-items-page",this.updateCounts)}},{key:"componentWillUnmount",value:function(){T["saved-items-page"]=function(){}}},{key:"updateCounts",value:function(){var e=z(),t=W(),a=J();this.setState({publications:e,authors:t,resources:a})}},{key:"render",value:function(){var e=this.state.resources,t=this.state.authors,a=this.state.publications;return console.log(e),console.log(t),console.log(a),i.a.createElement("div",{className:"SavedItemPage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},"Your pinned items"),i.a.createElement("p",null,"These items are stored temporarily in your browser. They will not be saved after you close the browser window or tab.")),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"testimonies",value:e.length}),i.a.createElement(Oe,{label:"publications",value:a.length}),i.a.createElement(Oe,{label:"authors",value:t.length})))),{}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:e}),i.a.createElement(le,{items:a}),i.a.createElement(le,{items:t})))}}]),t}(i.a.Component);a(88);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ae=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a.dataHasLoaded=a.dataHasLoaded.bind(Object(p.a)(a));var n=0,r=setInterval(function(){n+=1;var e=0,t=[C.author,C.publication,C.footnote,C.resource];t.forEach(function(t){!0===t.hasLoaded()&&e++}),e===t.length?(a.dataHasLoaded(),clearInterval(r)):console.log("Data has not completely loaded yet "+n)},10);return a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"dataHasLoaded",value:function(){this.setState({loaded:!0})}},{key:"render",value:function(){return this.state.loaded?i.a.createElement("div",{className:"CitationDB"},i.a.createElement(I.a,{basename:"/"},i.a.createElement(be.a,{path:"/",component:Se(ge),exact:!0}),i.a.createElement(be.a,{path:"/publications/:id",render:function(e){return Se(ke)(Ie({saveType:"publication"},e))}}),i.a.createElement(be.a,{path:"/resources/:id",render:function(e){return Se(Ne)(Ie({saveType:"resource"},e))}}),i.a.createElement(be.a,{path:"/authors/:id",render:function(e){return Se(we)(Ie({saveType:"author"},e))}}),i.a.createElement(be.a,{path:"/pins",component:Se(Pe)}))):i.a.createElement("div",null,"Loading...")}}]),t}(i.a.Component),De=a(35),Te=a.n(De),_e=a(36);var Fe=function(){var e=Object(_e.fortunize)(Ae);return i.a.createElement("div",{className:"App"},i.a.createElement(Te.a,null),i.a.createElement(e,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.30592654.chunk.js.map