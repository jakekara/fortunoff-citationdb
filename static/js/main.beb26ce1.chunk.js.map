{"version":3,"sources":["CitationDB/Data/dictToArray.js","CitationDB/Data/BasicAPIEndpoint.js","CitationDB/Data/utils/uniqueArray.js","CitationDB/Data/utils/FussyArray.js","CitationDB/Data/publication.js","CitationDB/Data/enums.js","CitationDB/Data/footnote.js","CitationDB/Data/resource.js","CitationDB/Data/author.js","CitationDB/Data/summarize.js","CitationDB/Data/utils/secondsToTimestamp.js","CitationDB/Data/utils/getResourceLink.js","CitationDB/Data/index.js","CitationDB/Button/index.js","CitationDB/SavedItemStorage/index.js","CitationDB/SaveButton/index.js","CitationDB/config.js","CitationDB/ResultList/ResultListItem/index.js","CitationDB/ResultList/index.js","CitationDB/ToggleButton/index.js","CitationDB/HomePage/SearchArea.js","CitationDB/PublicationHistogram/index.js","CitationDB/BreadCrumb/SavedItemsCounter.js","CitationDB/BreadCrumb/index.js","CitationDB/TopWrapper/index.js","CitationDB/BigNumber/index.js","CitationDB/HomePage/index.js","CitationDB/PublicationPage/index.js","CitationDB/ResourcePage/index.js","CitationDB/ErrorPages/Page404.js","CitationDB/AuthorPage/index.js","CitationDB/GenericPage/index.js","CitationDB/SavedItemsPage/index.js","CitationDB/index.js","App.js","serviceWorker.js","index.js"],"names":["dictToArray","obj","keyField","arguments","length","undefined","Object","keys","map","key","ret","_objectSpread","BasicAPIEndpoint","_this","this","headerKey","x","typeKey","fireWhenLoaded","classCallCheck","loaded","bind","resourceDictionary","resourceArray","all","dictionary","byId","filter","find","handleData","hasLoaded","hasOwnProperty","url","fetch","then","res","json","error","console","_this2","forEach","k","o","id","assign","f","matches","Error","uniqueArray","arr","kx","indexOf","push","FussyArray","_getPrototypeOf2","_len","items","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","dict","ks","add","assertThisInitialized","addArray","value","String","includes","keyFunc","i","endpoint","PublicationAPIEndPoint","props","_","byAuthor","inFootnotes","byResource","authorId","footnotes","resourceId","footnote","fetch-data-url","entity","publication","author","resource","FootnoteAPIEndpoint","byPublication","publicationId","resourceID","trim","videoBaseURL","slice","tape","Number","start_time","Math","round","ResourceAPIEndpoint","citedByAuthor","yearCounts","item","date","count","label","countByType","__type","secondsToTimestamp","seconds","h","floor","remaining","m","s","seg","padStart","getResourceLink","num","Data","search","options","toggles","searchTerm","results","searchEntity","field","api","fofx","toLowerCase","name","summarize","utils","ToggleButton","react_default","a","createElement","onClick","className","text","React","Component","storage","localStorage","callbacks","hasStorage","setItem","Date","now","removeItem","_unused","listID","type","getList","getItem","JSON","parse","_unused2","setList","stringify","subscribe","addItem","getSavedAuthors","getSavedPublications","getSavedResources","saveResource","savePublication","saveAuthor","removeResource","removePublication","removeAuthor","SaveButton","saveItem","getSavedItems","isSaved","state","setState","Button_ToggleButton","setSaved","config","histogram","minYear","maxYear","words","singular","plural","PillTray","title","react_router_dom","to","link","HeaderLink","term","header","ItemHeader","ResultListItem_HeaderLink","FootnoteFooter","chapter","page","AuthorFooter","publications","resources","ResultListItem_PillTray","pluralize","ResourceFooter","PublicationFooter","authors","authorID","idx","publisher","Footer","ResultListItem_AuthorFooter","ResultListItem_PublicationFooter","ResultListItem_ResourceFooter","ResultListItem_FootnoteFooter","ResultListItem","ResultListItem_ItemHeader","ResultListItem_Footer","target","rel","href","getFootnoteURI","SaveButton_SaveButton","ResultList","itemCount","step","loadMore","trackScrolling","distanceFromBottom","scrollBottom","window","pageYOffset","innerHeight","document","body","offsetHeight","decideToIncrement","addEventListener","removeEventListener","sort","b","__header","ResultListItem_ResultListItem","handleClick","itemType","status","dist","callback","placeholder","t","wordsKey","ToggleButton_ToggleButton","handler","data","jakekara_metadash_viz_dist","margin","top","left","right","bottom","SavedItemsCounter","getCurrentCount","_useState","useState","_useState2","slicedToArray","setCount","Fragment","BreadCrumb","HomeButton","withRouter","location","pathname","saveType","TopWrapper","BigNumber","HomePage","toggleFactory","setSearchTerm","newState","HomePage_objectSpread","_this3","counts","PublicationHistogram_default","SearchArea_default","ResultList_ResultList","PublicationPage","match","params","footnoteCount","resourceCount","uri","ResourcePage","r","log","AuthorPage","labelSingular","GenericPage","PageComponent","SavedItemsPage","updateCounts","_default","dataHasLoaded","loadCounter","failCounter","interval","setInterval","loadedCount","tables","table","clearInterval","e","prompt","basename","react_router","path","component","exact","render","CitationDB_objectSpread","App","FortunizedApp","fortunize","CitationDB","jakekara_metadash_site_banner_dist_default","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","src_App","getElementById","URL","process","origin","response","contentType","headers","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"kvBAAe,IAAAA,EAAA,SAASC,GAAmB,IAAdC,EAAcC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,KAElC,OAAOG,OAAOC,KAAKN,GAAKO,IAAK,SAAAC,GAEzB,IAAIC,uVAAGC,CAAA,GACAV,EAAIQ,IAKX,OAFAC,EAAIR,GAAYO,EAETC,KCRME,aAOjB,SAAAA,EAAYX,GAA2D,IAAAY,EAAAC,KAAtDC,EAAsDZ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5C,SAAAa,KAAOC,EAAqCd,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA7B,SAAAa,KAAOE,EAAsBf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,aAqB5D,GArBmEG,OAAAa,EAAA,EAAAb,CAAAQ,KAAAF,GAEnEE,KAAKM,QAAS,EAEdN,KAAKC,UAAYA,EAAUM,KAAKP,MAChCA,KAAKG,QAAUA,EAAQI,KAAKP,MAE5BA,KAAKQ,mBAAqBrB,EAC1Ba,KAAKS,cAAgBvB,EAAYC,GAEjCa,KAAKU,IAAMV,KAAKU,IAAIH,KAAKP,MACzBA,KAAKW,WAAaX,KAAKW,WAAWJ,KAAKP,MACvCA,KAAKY,KAAOZ,KAAKY,KAAKL,KAAKP,MAC3BA,KAAKa,OAASb,KAAKa,OAAON,KAAKP,MAC/BA,KAAKc,KAAOd,KAAKc,KAAKP,KAAKP,MAC3BA,KAAKe,WAAaf,KAAKe,WAAWR,KAAKP,MACvCA,KAAKI,eAAiBA,EAAeG,KAAKP,MAC1CA,KAAKgB,UAAYhB,KAAKgB,UAAUT,KAAKP,MAIjCb,EAAI8B,eAAe,kBAAkB,CAErC,IAAMC,EAAM/B,EAAI,kBAChBgC,MAAMD,GACLE,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KACG,SAACjC,GAAD,OAAOY,EAAKgB,WAAW5B,IACvB,SAACoC,GAASC,QAAQD,MAAM,sBAAwBL,EAAKK,UAIzDvB,KAAKe,WAAW5B,2DAOX,OAAOa,KAAKM,0CAMdnB,GAAI,IAAAsC,EAAAzB,KAEXR,OAAOC,KAAKN,GAAKuC,QAAQ,SAAAC,GACrB,IAAIC,EAAIzC,EAAIwC,GACZC,EAAC,GAASD,EACVC,EAAC,SAAeH,EAAKxB,UAAU2B,GAC/BA,EAAC,OAAaH,EAAKtB,QAAQyB,KAG/B5B,KAAKQ,mBAAqBrB,EAC1Ba,KAAKS,cAAgBvB,EAAYC,GACjCa,KAAKM,QAAS,EACdN,KAAKI,sDASL,OAAOJ,KAAKQ,iDAQZ,OAAOR,KAAKS,2CAQXoB,GAAkB,IAAdzC,EAAcC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,KACVO,EAAMJ,OAAOsC,OAAO,GAAI9B,KAAKW,aAAakB,IAI9C,OADAjC,EAAIR,GAAYyC,EACTjC,iCAQJmC,GACH,OAAO/B,KAAKU,MAAMG,OAAOkB,gCAQxBA,GAED,IAAMC,EAAUhC,KAAKa,OAAOkB,GAE5B,GAAuB,IAAnBC,EAAQ1C,OAAe,OAAO0C,EAAQ,GAE1C,GAAIA,EAAQ1C,OAAS,EACjB,MAAM,IAAI2C,MAAO,uDAEhB,GAAID,EAAQ1C,OAAS,EACtB,MAAM,IAAI2C,MAAM,oCC3HbC,EAAA,SAAUC,GAAe,IAAVxC,EAAUN,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,SAAAa,GAAC,OAAEA,GAC3BI,EAAS,GAWf,OAVa6B,EACRtB,OAAO,SAAAX,GACJ,IAAMkC,EAAKzC,EAAIO,GACf,OAAKA,IACDI,EAAO+B,QAAQD,IAAO,KAG1B9B,EAAOgC,KAAKF,IACL,GALU,gBCLRG,cAEjB,SAAAA,IAAqB,IAAAC,EAAAzC,EAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAuC,GAAA,QAAAE,EAAApD,UAAAC,OAANoD,EAAM,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAANF,EAAME,GAAAvD,UAAAuD,GAAA,OACjB7C,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,MAAAwC,EAAAhD,OAAAsD,EAAA,EAAAtD,CAAA+C,IAAAQ,KAAAC,MAAAR,EAAA,CAAAxC,MAAAiD,OAASP,MACJQ,KAAO,GACZnD,EAAKoD,GAAK,GAEVpD,EAAKqD,IAAMrD,EAAKqD,IAAI7C,KAATf,OAAA6D,EAAA,EAAA7D,CAAAO,IACXA,EAAKuD,SAAWvD,EAAKuD,SAAS/C,KAAdf,OAAA6D,EAAA,EAAA7D,CAAAO,IANCA,mEASjBJ,EAAK4D,GACAA,IAAQA,EAAQ5D,GACjBK,KAAKmD,GAAGd,QAAQmB,OAAO7D,KAAS,GAChCK,KAAKmD,GAAGM,SAAS9D,KACrBK,KAAKkD,KAAKvD,GAAO4D,EACjBvD,KAAKmD,GAAK3D,OAAOC,KAAKO,KAAKkD,MAC3BlD,KAAKsC,KAAKiB,qCAILpB,GAKL,IALuB,IAAbuB,EAAarE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,SAAAa,GAAC,OAAEA,GAKZyD,EAAI,EAAGA,EAAIxB,EAAI7C,OAAQqE,IAC5B3D,KAAKoD,IAAIM,EAAQvB,EAAIwB,IAAKxB,EAAIwB,uBA3BFhB,QC2EzBiB,EANE,gBAnDb,SAAAC,EAAYC,GAAM,IAAA/D,EAAA,OAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAA6D,IACd9D,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAAqE,GAAAd,KAAA/C,KAAM8D,EAAO,SAAA5D,GAAC,OAAEA,EAAC,OAAW,SAAA6D,GAAC,MAAE,kBAE1BC,SAAWjE,EAAKiE,SAASzD,KAAdf,OAAA6D,EAAA,EAAA7D,CAAAO,IAChBA,EAAKkE,YAAclE,EAAKkE,YAAY1D,KAAjBf,OAAA6D,EAAA,EAAA7D,CAAAO,IACnBA,EAAKmE,WAAanE,EAAKmE,WAAW3D,KAAhBf,OAAA6D,EAAA,EAAA7D,CAAAO,IALJA,wEAcToE,GAIL,OAAOnE,KAAKa,OAAO,SAAAX,GAAC,OAAEA,EAAE,aAAamC,QAAQ8B,IAAa,wCAIlDC,GAAU,IAAA3C,EAAAzB,KAOlB,OAAOkC,EACHkC,EAAU1E,IAAI,SAAAQ,GAAC,OAAIuB,EAAKb,KAAKV,EAAE,qBAC/B,SAAAA,GAAC,OAAEA,EAAC,wCAODmE,GACP,OAAOrE,KAAKiE,YAAYK,EAASJ,WAAWG,WA9CfvE,GA0DpB,CAA2B,CAACyE,iBAAiB,0BC5D/CC,EAPA,CACXC,YAAa,cACbC,OAAQ,SACRJ,SAAU,WACVK,SAAU,YCwFCf,EADE,gBAnFb,SAAAgB,EAAYd,GAAM,IAAA/D,EAAA,OAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAA4E,IACd7E,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAAoF,GAAA7B,KAAA/C,KAAM8D,EAAO,SAAA5D,GAAC,OAAEuE,EAAY7D,KAAKV,EAAE,oBAAoB,SAAA6D,GAAC,OAAES,EAAOF,aAC5DO,cAAgB9E,EAAK8E,cAActE,KAAnBf,OAAA6D,EAAA,EAAA7D,CAAAO,IACrBA,EAAKiE,SAAWjE,EAAKiE,SAASzD,KAAdf,OAAA6D,EAAA,EAAA7D,CAAAO,IAChBA,EAAKmE,WAAanE,EAAKmE,WAAW3D,KAAhBf,OAAA6D,EAAA,EAAA7D,CAAAO,IAJJA,6EAYJ+E,GACV,OAAO9E,KAAKa,OAAO,SAAAX,GAAC,OAAIA,EAAE,oBAAsB4E,uCAQzCT,GACP,OAAOrE,KAAKa,OAAO,SAAAX,GAAC,OAAIA,EAAE,iBAAmBmE,qCAQxCF,GAAS,IAAA1C,EAAAzB,KACVJ,EAAM,GAOV,OALA6E,EAAYT,SAASG,GAChBzC,QAAQ,SAAAxB,GACLN,EAAMA,EAAIqD,OAAOxB,EAAKoD,cAAc3E,EAAC,OAGtCN,yCAQI0E,GAOV,IAEKS,EAAaT,EAAS,eAAeU,OAC3C,GAAID,EAAW1C,QAAQ,QAAU,EAAI,MAHjB,wCAIpB,IAEM4C,EAAe,2CAFP,YAAcF,EAAWG,MAAM,IAE4B,IAIzE,IAAKZ,EAAQ,KAAW,OAAOW,EAC/B,IAAME,EAAOC,OAAOd,EAAQ,MACtBe,EAAaC,KAAKC,MAAMjB,EAAQ,YAEtC,OAAKa,GAAQE,EAAW/F,OAAS,EAAW2F,EAIrCA,EAAeK,KAAKC,MAAMJ,GAAQ,IAAME,SAxErBvF,GAoFjB,CAAwB,CAACyE,iBAAiB,uBCnB5CX,EAPE,gBAxDb,SAAA4B,EAAY1B,GAAO,IAAA/D,EAAA,OAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAwF,IACfzF,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAAgG,GAAAzC,KAAA/C,KAAM8D,EAAO,SAAA5D,GAAC,OAAEA,EAAC,OAAW,SAAA6D,GAAC,MAAE,eAE1B0B,cAAgB1F,EAAK0F,cAAclF,KAAnBf,OAAA6D,EAAA,EAAA7D,CAAAO,IACrBA,EAAKkE,YAAclE,EAAKkE,YAAY1D,KAAjBf,OAAA6D,EAAA,EAAA7D,CAAAO,IACnBA,EAAK8E,cAAgB9E,EAAK8E,cAActE,KAAnBf,OAAA6D,EAAA,EAAA7D,CAAAO,IACrBA,EAAK0F,cAAgB1F,EAAK0F,cAAclF,KAAnBf,OAAA6D,EAAA,EAAA7D,CAAAO,IANNA,2EAaPqE,GAAW,IAAA3C,EAAAzB,KAEnB,OAAOkC,EACHkC,EACC1E,IAAI,SAAAQ,GACD,OAAOuB,EAAKb,KAAKV,EAAE,yDAsBjB4E,GACV,OAAO9E,KAAKiE,YAAYK,EAASO,cAAcC,0CAOrCX,GAEV,OAAOnE,KAAKiE,YAAYK,EAASN,SAASG,WAnDhBrE,GAyDjB,CAAwB,CAACyE,iBAAiB,uBCxD5CX,EADE,IAAI9D,EAAiB,CAACyE,iBAAiB,oBAAqB,SAAArE,GAAC,OAAEA,EAAC,MAAU,SAAAA,GAAC,OAAEsE,EAAOE,SCVrG,SAASgB,EAAWhD,GAChB,IAAI9C,EAAM,GAQV,OAPA8C,EAAMhB,QAAQ,SAAAiE,GACNP,OAAOO,EAAKC,OAAuC,IAA7BpC,OAAOmC,EAAKC,MAAMtG,SACnCM,EAAI+F,EAAKC,QAAShG,EAAI+F,EAAKC,MAAQ,CAAEC,MAAO,EAAGC,MAAOH,EAAKC,OAChEhG,EAAI+F,EAAKC,MAAMC,OAAS,KAGhCjG,EAAMJ,OAAOC,KAAKG,GAAKF,IAAI,SAAAiC,GAAC,OAAI/B,EAAI+B,KAIxC,SAASoE,EAAYrD,GACjB,IAAI9C,EAAM,CACN6E,YAAY,EACZH,SAAS,EACTK,SAAS,EACTD,OAAO,GAMX,OAJAhC,EAAMhB,QAAQ,SAAAiE,GACN/F,EAAI+F,EAAKK,UAAUpG,EAAI+F,EAAKK,QAAU,GAC1CpG,EAAI+F,EAAKK,SAAW,IAEjBpG,ECvBI,SAASqG,EAAmBC,GAGvC,IAAMC,EAAIb,KAAKc,MAAMF,EAAO,MAExBG,EAAYH,EAAe,GAAJC,EAAS,GAE9BG,EAAIhB,KAAKc,MAAMC,EAAY,IAEjCA,GAAyB,GAAKC,EAE9B,IAAMC,EAAIjB,KAAKc,MAAMC,GAEfG,EAAM,SAAAtG,GAAC,OAAIsD,OAAOtD,GAAGuG,SAAS,EAAG,MAEvC,SAAAxD,OAAUuD,EAAIL,GAAd,KAAAlD,OAAoBuD,EAAIF,GAAxB,KAAArD,OAA8BuD,EAAID,ICfvB,SAASG,EAAgB/B,GAMnC,IAAMgC,EAAMnD,OAAOmB,EAAS9C,GAAGqD,MAAM,IAAIuB,SAAS,EAAG,KAErD,yDAAAxD,OAA0D0D,GC0DhD,IAAAC,EAAA,CACXlC,SACAJ,WACAG,cACAE,WACAkC,OArDJ,SAAgBC,GAGZ,IAAMC,GADND,EAAUA,GAAW,IACGC,SAAW,GAC7BC,EAAaF,EAAQE,YAAc,GAErCC,EAAU,IAAI1E,EAElB,SAAS2E,EAAa1C,EAAQ2C,EAAOC,GAEjC,OAAwB,IAApBL,EAAQvC,GAA0B,GAE/B4C,EAAIvG,OAAO,SAAAX,GAEd,IAAMmH,EAAOF,EAAMjH,GAInB,OAAI8G,EAAWhC,OAAO1F,OAAS,KAC1B+H,MACOA,EAAKC,cAAcjF,QAAQ2E,EAAWM,gBAAkB,KAyB5E,OAdAL,EAAQ3D,SAAS4D,EAAa,SAAU,SAAAhH,GAAC,OAAEA,EAAC,MAAUwE,GAAS,SAAAxE,GAAC,MAAE,UAAYA,EAAC,KAI/E+G,EAAQ3D,SAAS4D,EAAa,WAAY,SAAAhH,GAAC,OAAEA,EAAC,OAAWyE,GAAW,SAAAzE,GAAC,MAAE,YAAcA,EAAC,KAGtF+G,EAAQ3D,SAAS4D,EAAa,cAAe,SAAAhH,GAAC,OAAEwE,EAAO9D,KAAKV,EAAE,cAAcqH,MAAM9C,GAAc,SAAAvE,GAAC,MAAE,eAAiBA,EAAC,KAGrH+G,EAAQ3D,SAAS4D,EAAa,cAAe,SAAAhH,GAAC,OAAEA,EAAC,OAAWuE,GAAc,SAAAvE,GAAC,MAAE,eAAiBA,EAAC,KAIxF+G,GASPO,YACAC,gBCtEiBC,gMAKb,OAAOC,EAAAC,EAAAC,cAAA,OACHC,QAAS9H,KAAK8D,MAAMgE,QACpBC,UAAU,UAAU/H,KAAK8D,MAAMkE,aAPDC,IAAMC,YCA1CC,EAAUC,aACZC,EAAY,GAEhB,SAASC,IACL,IACIH,EAAQI,QAAQ,SAASC,KAAKC,OAC9BN,EAAQO,WAAW,UACrB,MAAAC,GACE,OAAO,EAEX,OAAO,EAGX,SAASC,EAAOC,GAAO,MAAO,sBAAwBA,EAEtD,SAASC,EAAQD,GACb,IAAKP,IAAe,MAAM,GAC1B,IAAM1I,EAAMuI,EAAQY,QAAQH,EAAOC,IACnC,IAAKjJ,EAAM,MAAO,GAClB,IACI,OAAOoJ,KAAKC,MAAMrJ,GACpB,MAAAsJ,GACE,MAAO,IAIf,SAASC,EAAQN,EAAM1G,GACdmG,MACLH,EAAQI,QAAQK,EAAOC,GAAOG,KAAKI,UAAUjH,IAC7C3C,OAAOC,KAAK4I,GAAW3G,QAAS,SAAAC,GAAC,OAAI0G,EAAU1G,QAOnD,SAAS0H,EAAU1J,EAAKoC,GACpBsG,EAAU1I,GAAOoC,EAGrB,SAASuH,EAAQT,EAAMhH,GACnB,IAAIM,EAAM2G,EAAQD,GAEd1G,EAAIE,QAAQR,IAAO,IAEvBM,EAAIG,KAAKT,GACTsH,EAAQN,EAAM1G,IAGlB,SAASuG,EAAWG,EAAMhH,GAEtBsH,EAAQN,EADEC,EAAQD,GAAMhI,OAAO,SAAAX,GAAC,OAAGA,IAAI2B,KAK3C,IAAMlC,EAAM,CACRgF,SAAS,WACTF,YAAY,cACZC,OAAO,UAGX,SAAS6E,IAAmB,OAAOT,EAAQnJ,EAAI+E,QAAQhF,IAAI,SAAAmC,GAAE,OAAE+E,EAAKlC,OAAO9D,KAAKiB,KAChF,SAAS2H,IAAwB,OAAOV,EAAQnJ,EAAI8E,aAAa/E,IAAI,SAAAmC,GAAE,OAAE+E,EAAKnC,YAAY7D,KAAKiB,KAC/F,SAAS4H,IAAqB,OAAOX,EAAQnJ,EAAIgF,UAAUjF,IAAI,SAAAmC,GAAE,OAAE+E,EAAKjC,SAAS/D,KAAKiB,KAEtF,SAAS6H,EAAa7H,GAAKyH,EAAQ3J,EAAIgF,SAAU9C,GACjD,SAAS8H,EAAgB9H,GAAKyH,EAAQ3J,EAAI8E,YAAa5C,GACvD,SAAS+H,EAAW/H,GAAKyH,EAAQ3J,EAAI+E,OAAQ7C,GAE7C,SAASgI,EAAehI,GAAK6G,EAAW/I,EAAIgF,SAAU9C,GACtD,SAASiI,EAAkBjI,GAAK6G,EAAW/I,EAAI8E,YAAa5C,GAC5D,SAASkI,EAAalI,GAAK6G,EAAW/I,EAAI+E,OAAQ7C,OCnE7BmI,cAEjB,SAAAA,EAAYlG,GAAO,IAAA/D,EAGf,GAHeP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAgK,GAGS,cAFxBjK,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAAwK,GAAAjH,KAAA/C,KAAM8D,KAEGA,MAAM+E,KACX9I,EAAKkK,SAAW9B,EAChBpI,EAAK2I,WAAaP,EAClBpI,EAAKmK,cAAgB/B,OAClB,GAAwB,WAApBpI,EAAK+D,MAAM+E,KAClB9I,EAAKkK,SAAW9B,EAChBpI,EAAK2I,WAAaP,EAClBpI,EAAKmK,cAAgB/B,MAClB,IAAwB,gBAApBpI,EAAK+D,MAAM+E,KAKlB,OAAArJ,OAAAqD,EAAA,EAAArD,CAAAO,GAJAA,EAAKkK,SAAW9B,EAChBpI,EAAK2I,WAAaP,EAClBpI,EAAKmK,cAAgB/B,EAdV,OAmBfpI,EAAKoK,QAAUpK,EAAKoK,QAAQ5J,KAAbf,OAAA6D,EAAA,EAAA7D,CAAAO,IAEfA,EAAKqK,MAAQ,CACTD,QAASpK,EAAKoK,WAtBHpK,yEA4Bf,OAAOC,KAAKkK,gBAAgBxK,IAAI,SAAAQ,GAAC,OAAIA,EAAE2B,KAAIQ,QAAQrC,KAAK8D,MAAMjC,KAAO,qCAIrE7B,KAAKqK,SAAS,CAAEF,QAASnK,KAAKmK,6CAGzB,IAAA1I,EAAAzB,KACL,MAAI,CAAC,cAAe,SAAU,YAAYqC,QAAQrC,KAAK8D,MAAM+E,MAAQ,EAAa,KAE1ElB,EAAAC,EAAAC,cAAA,OAAKE,UAAS,cAAA9E,OAAgBjD,KAAKoK,MAAMD,QAAU,SAAW,SAE9DnK,KAAKmK,UACDxC,EAAAC,EAAAC,cAACyC,EAAD,CAAQxC,QAAS,WAAQrG,EAAKiH,WAAWjH,EAAKqC,MAAMjC,IAAKJ,EAAK8I,YAAcvC,KAAK,UAEjFL,EAAAC,EAAAC,cAACyC,EAAD,CAAQxC,QAAS,WAAQrG,EAAKwI,SAASxI,EAAKqC,MAAMjC,IAAKJ,EAAK8I,YAAcvC,KAAK,gBA7C3DC,IAAMC,8BCP/BsC,GAAA,CACXC,UAAU,CACNC,QAAS,KACTC,QAAS,MAEbC,MAAM,CACFjG,SAAS,CACLkG,SAAU,YACVC,OAAQ,iBCGdC,oLAEE,OACIpD,EAAAC,EAAAC,cAAA,OAAKE,UAAS,qBAAA9E,OAAuBjD,KAAK8D,MAAMkH,QAE5CrD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,aACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAS,mBAAsB/H,KAAK8D,MAAMpB,MAAMpD,OAArD,IAA8DU,KAAK8D,MAAMkH,OAExEhL,KAAK8D,MAAMpB,MAAMwC,MAAM,EAAG,GAAGxF,IAAI,SAACiG,EAAMhC,GAErC,OACIgE,EAAAC,EAAAC,cAAA,OAAKlI,IAAKgE,EAAGoE,UAAU,QACnBJ,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CAAMC,GAAIvF,EAAKwF,MAAOxF,EAAKqF,mBAZpC/C,IAAMC,WAsBvBkD,oLAGE,IAAMC,EAAOrL,KAAK8D,MAAM+E,KAAO,IAE/B,GAAI7I,KAAK8D,MAAM+E,OAASrE,EAAOF,SAAU,CACrC,IAAMvC,EAAI/B,KAAK8D,MAAM6B,KACfhB,EAAWiC,EAAKjC,SAAS/D,KAAKZ,KAAK8D,MAAM6B,KAAK,gBACpD,OACIgC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACXJ,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CAAMC,GAAE,cAAAjI,OAAgB0B,EAAS9C,KAAO8C,EAASqG,MAAjD,IAAyDjJ,EAAC,WAAD,IAAAkB,OAAsB2D,EAAKa,MAAMxB,mBAAmBlE,EAAC,aAAqB,OAM/I,OAAO4F,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CACHC,GAAE,IAAAjI,OAAMoI,EAAN,KAAApI,OAAcjD,KAAK8D,MAAM6B,KAAK9D,KAClC7B,KAAK8D,MAAMwH,eAlBIrD,IAAMC,WAuBzBqD,oLAEE,IAAIzF,EAAQ9F,KAAK8D,MAAM+E,KAKvB,OAJI2B,GAAOI,MAAM3J,eAAejB,KAAK8D,MAAM+E,QACvC/C,EAAQ0E,GAAOI,MAAM9E,GAAO+E,UAI5BlD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBAAf,IAAqCjC,EAArC,KACC,IAAI6B,EAAAC,EAAAC,cAAC2D,GAAexL,KAAK8D,eAVjBmE,IAAMC,WAgBzBuD,oLAKE,OACI9D,EAAAC,EAAAC,cAAA,WACK7H,KAAK8D,MAAM6B,KAAKqC,KAAhB,IAAA/E,OAA2BjD,KAAK8D,MAAM6B,KAAKqC,KAA3C,KAAsD,KACvDL,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBACX/H,KAAK8D,MAAM6B,KAAK+F,QAAhB,GAAAzI,OAA6BjD,KAAK8D,MAAM6B,KAAK+F,QAA7C,MAA4D,MAEjE/D,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBACX/H,KAAK8D,MAAM6B,KAAKgG,KAAhB,QAAA1I,OAA+BjD,KAAK8D,MAAM6B,KAAKgG,KAA/C,KAA0D,eAbtD1D,IAAMC,WAqB7B0D,oLAEE,IAAMC,EAAejF,EAAKnC,YAAYT,SAAShE,KAAK8D,MAAM6B,KAAK9D,IACzDiK,EAAYlF,EAAKjC,SAASc,cAAczF,KAAK8D,MAAM6B,KAAK9D,IAE9D,OACI8F,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,WAGIF,EAAAC,EAAAC,cAACkE,GAAD,CAAUf,MAAOgB,KAAU,eAAgBH,EAAavM,QAASoD,MAAOmJ,EAAanM,IAAI,SAAAQ,GAAO,MAAO,CAAE8K,MAAS9K,EAAE8K,MAAOG,KAAA,iBAAAlI,OAAyB/C,EAAE2B,UAE1J8F,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAACkE,GAAD,CAAUf,MAAOgB,KAAUxB,GAAOI,MAAMjG,SAASkG,SAAUiB,EAAUxM,QAAU,SAAUoD,MAAOoJ,EAAUpM,IAAI,SAAAQ,GAAO,MAAO,CAAE8K,MAAS9K,EAAE8K,MAAOG,KAAA,cAAAlI,OAAsB/C,EAAE2B,kBAbjKoG,IAAMC,WAwB3B+D,oLAGE,IAAM7H,EAAYwC,EAAKtC,SAASJ,WAAWlE,KAAK8D,MAAM6B,KAAK9D,IACrDgK,EAAejF,EAAKnC,YAAYR,YAAYG,GAClD,OACIuD,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBAAkB/H,KAAK8D,MAAM6B,KAAK9D,KAEtD8F,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAACkE,GAAD,CAAUf,MAAOgB,KAAU,cAAeH,EAAavM,QAASoD,MAAOmJ,EAAanM,IAAI,SAAAQ,GAAO,MAAO,CAAE8K,MAAS9K,EAAE8K,MAAOG,KAAA,iBAAAlI,OAAyB/C,EAAE2B,kBAX5IoG,IAAMC,WAmB7BgE,oLAEE,IAAMzH,EAAczE,KAAK8D,MAAM6B,KAKzBwG,GADYnM,KAAK8D,MAAM6B,KAAK,cAAgB,IACxBjG,IAAI,SAAA0M,GAE1B,OADUxF,EAAKlC,OAAO9D,KAAKwL,IAAa,KAItCN,EAAYlF,EAAKjC,SAASE,cAAc7E,KAAK8D,MAAM6B,KAAK9D,IAE9D,OACI8F,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,WACKsE,EAAQzM,IAAI,SAACgF,EAAQ2H,GAClB,OAAO3H,EAAO6C,KAAQI,EAAAC,EAAAC,cAAA,QAAMlI,IAAK0M,EAAKtE,UAAU,YAAWJ,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CAAMC,GAAE,YAAAjI,OAAcyB,EAAO7C,KAAO6C,EAAO6C,OAAwB,OAGjI9C,EAAY6H,UAAa3E,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBAAhB,KAAoCtD,EAAY6H,WAAsB,KAC/F7H,EAAYmB,KAAQ+B,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBAAhB,KAAoCtD,EAAYmB,MAAiB,MAI1F+B,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAACkE,GAAD,CAAUf,MAAOgB,KAAUxB,GAAOI,MAAMjG,SAASkG,SAAUiB,EAAUxM,QAAU,SAAUoD,MAAOoJ,EAAUpM,IAAI,SAAAQ,GAAO,MAAO,CAAE8K,MAAS9K,EAAE8K,MAAOG,KAAA,cAAAlI,OAAsB/C,EAAE2B,kBA3B5JoG,IAAMC,WAwChCqE,oLAEE,MAAwB,WAApBvM,KAAK8D,MAAM+E,KAA4BlB,EAAAC,EAAAC,cAAC2E,GAAiBxM,KAAK8D,OAC1C,gBAApB9D,KAAK8D,MAAM+E,KAAiClB,EAAAC,EAAAC,cAAC4E,GAAsBzM,KAAK8D,OACpD,aAApB9D,KAAK8D,MAAM+E,KAA8BlB,EAAAC,EAAAC,cAAC6E,GAAmB1M,KAAK8D,OAC9C,aAApB9D,KAAK8D,MAAM+E,KAA8BlB,EAAAC,EAAAC,cAAC8E,GAAmB3M,KAAK8D,OAC9D6D,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBANVE,IAAMC,WAUN0E,oLAEb,OACIjF,EAAAC,EAAAC,cAAA,OAAKE,UAAS,kBAAA9E,OAAoBjD,KAAK8D,MAAM+E,OAEzClB,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACXJ,EAAAC,EAAAC,cAAA,cACIF,EAAAC,EAAAC,cAACgF,GAAe7M,KAAK8D,QAEzB6D,EAAAC,EAAAC,cAAA,cACIF,EAAAC,EAAAC,cAACiF,GAAW9M,KAAK8D,SAID,aAApB9D,KAAK8D,MAAM+E,KACNlB,EAAAC,EAAAC,cAAA,KACGkF,OAAO,SACPC,IAAI,sBACJC,KAAMrG,EAAKtC,SAAS4I,eAAelN,KAAK8D,MAAM6B,OAI9CgC,EAAAC,EAAAC,cAACyC,EAAD,CAAQtC,KAAK,UAEd,KAGPL,EAAAC,EAAAC,cAACsF,EAAD,CAAYtE,KAAM7I,KAAK8D,MAAM+E,KAAMhH,GAAI7B,KAAK8D,MAAM6B,KAAK9D,aA3B/BoG,IAAMC,WCpL7BkF,eAEjB,SAAAA,EAAYtJ,GAAM,IAAA/D,EAAA,OAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAoN,IACdrN,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAA4N,GAAArK,KAAA/C,KAAM8D,KACDsG,MAAQ,CACTiD,UAAU,GACVC,KAAK,IAGTvN,EAAKwN,SAAWxN,EAAKwN,SAAShN,KAAdf,OAAA6D,EAAA,EAAA7D,CAAAO,IAChBA,EAAKyN,eAAiBzN,EAAKyN,eAAejN,KAApBf,OAAA6D,EAAA,EAAA7D,CAAAO,IARRA,iFAYA0N,GACVzN,KAAK8D,MAAMpB,MAAMpD,OAASU,KAAKoK,MAAMiD,WAClCI,EAAqB,KACxBzN,KAAKuN,oDAOT,IAAMG,EAAeC,OAAOC,YAAcD,OAAOE,YAC3CJ,EAAqBE,OAAOG,SAASC,KAAKC,aAAeN,EAC/D1N,KAAKiO,kBAAkBR,+CAIvBK,SAASI,iBAAiB,SAAUlO,KAAKwN,+DAIzCM,SAASK,oBAAoB,SAAUnO,KAAKwN,mDAK5C,IAAMH,EAAYrN,KAAKoK,MAAMiD,UAAYrN,KAAKoK,MAAMkD,KACpDtN,KAAKqK,SAAS,CAACgD,+CAIf,IAAM3K,EAAQ1C,KAAK8D,MAAMpB,MAAM0L,KAC3B,SAACxG,EAAEyG,GAAM,OAAOzG,EAAE0G,SAAWD,EAAEC,SAAW,GAAK,IAC7C5O,IAAI,SAACQ,EAAGyD,GACN,OAAOgE,EAAAC,EAAAC,cAAC0G,GAAD,CACP5O,IAAKgE,EACLgC,KAAMzF,EACN2I,KAAM3I,EAAE8F,OACRsF,OAAQpL,EAAEoO,aAEfpJ,MAAM,EAAGlF,KAAKoK,MAAMiD,WACvB,OACI1F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACVrF,UAxDuBuF,IAAMC,oBCFzBR,2LAGb,OACIC,EAAAC,EAAAC,cAAA,OACIC,QAAS9H,KAAK8D,MAAM0K,YACpBzG,UAAS,gBAAA9E,OAAkBjD,KAAK8D,MAAM2K,SAA7B,KAAAxL,OAAyCjD,KAAK8D,MAAM4K,OAAS,KAAO,QAC7E/G,EAAAC,EAAAC,cAACyC,EAAD,CAAQtC,KAAMhI,KAAK8D,MAAMgC,gBAPCmC,IAAMC,gMCKxC,OAEIP,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,WAASE,UAAU,6BACfJ,EAAAC,EAAAC,cAAC8G,GAAA,UAAD,CACIC,SAAU5O,KAAK8D,MAAM8K,SACrBrL,MAAOvD,KAAK8D,MAAMP,MAClBsL,YAAW,0CAAA5L,OAA4CuH,GAAOI,MAAMjG,SAASkG,SAAlE,UAGnBlD,EAAAC,EAAAC,cAAA,WAASE,UAAU,6BACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACd/H,KAAK8D,MAAMiD,QAAQrH,IAAI,SAACoP,EAAGnL,GAExB,IAAImC,EAAQgJ,EAAEhJ,MAERiJ,EAAW/C,KAAUlG,EAAO,GAKlC,OAJI0E,GAAOI,MAAM3J,eAAe8N,KAC5BjJ,EAAQ0E,GAAOI,MAAMmE,GAAUjE,QAG5BnD,EAAAC,EAAAC,cAACmH,GAAD,CACHrP,IAAKgE,EACL6K,YAAaM,EAAEG,QACfnJ,MAAOA,EACP2I,SAAUK,EAAEhJ,MACZ4I,OAAQI,EAAEJ,oBA5BTzG,IAAMC,wMCC3B,IAAMgH,EAAOtI,EAAKY,UAAU9B,WACxB1F,KAAK8D,MAAMpB,MAAM7B,OAAO,SAAA8E,GAAI,MAAoB,gBAAhBA,EAAKK,UAGzC,OAAIkJ,EAAK5P,OAAS,EAAY,KAE1BqI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,wBACXJ,EAAAC,EAAAC,cAACsH,GAAA,UAAD,CACID,KAAMA,EACNxE,QAASF,GAAOC,UAAUC,QAC1BC,QAASH,GAAOC,UAAUE,QAC1ByE,OAAQ,CACJC,IAAK,GACLC,KAAM,GACNC,MAAO,GACPC,OAAQ,MAGhB7H,EAAAC,EAAAC,cAAA,MAAIE,UAAU,UAAd,gCArBaE,IAAMC,6BCGpBuH,GAAA,WAEX,IAAMC,EAAkB,WACpB,OAAOnG,IAAkBjK,OAASkK,IAAuBlK,OAASmK,IAAoBnK,QAHnEqQ,EAKGC,mBAASF,KALZG,EAAArQ,OAAAsQ,GAAA,EAAAtQ,CAAAmQ,EAAA,GAKhB9J,EALgBgK,EAAA,GAKTE,EALSF,EAAA,GAYvB,OAFAxG,EAAU,UAHU,WAChB0G,EAASL,OAIL/H,EAAAC,EAAAC,cAACF,EAAAC,EAAMoI,SAAP,KACHnK,EAAQ,EAAK8B,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CAAMlD,UAAU,aAAamD,GAAG,SAAQvD,EAAAC,EAAAC,cAACyC,EAAD,CAAQtC,KAAMgE,KAAU,MAAOnG,GAAO,MAA4B,OCXjH,SAASoK,GAAWnM,GAE/B,IAAMoM,EAAaC,aAAW,SAAArM,GAE1B,MAAmC,MAA5BA,EAAMsM,SAASC,SAAoB,KACtC1I,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CAAMlD,UAAU,aAAamD,GAAG,KAC5BvD,EAAAC,EAAAC,cAACyC,EAAD,CAAQtC,KAAK,YAInBnG,EAAKiC,EAAMjC,GACXyO,EAAWxM,EAAMwM,UAAY,UAEnC,OACI3I,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACXJ,EAAAC,EAAAC,cAACqI,EAAD,MACAvI,EAAAC,EAAAC,cAAC4H,GAAD,OAEJ9H,EAAAC,EAAAC,cAACsF,EAAD,CAAYtL,GAAIA,EAAIgH,KAAMyH,KChBvB,SAASC,GAAWrI,EAAWpE,GAC1C,OACI6D,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mCACXJ,EAAAC,EAAAC,cAACoI,GAAenM,GAChB6D,EAAAC,EAAAC,cAAA,WAASE,UAAU,cACdG,WCfN,SAASsI,GAAU1M,GAC9B,OACI6D,EAAAC,EAAAC,cAAA,OAAKE,UAAS,aAAA9E,OAAea,EAAMgC,QAC/B6B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UACVjE,EAAMP,OAEXoE,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SAASiE,KAAUlI,EAAMgC,MAAOhC,EAAMP,okBCD5CkN,eAEjB,SAAAA,EAAY3M,GAAO,IAAA/D,EAAA,OAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAyQ,IACf1Q,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAAiR,GAAA1N,KAAA/C,KAAM8D,KAEDsG,MAAQ,CACTpD,WAAY,GACZD,QAAS,CACLpC,UAAU,EACVF,aAAa,EACbC,QAAQ,IAIhB3E,EAAK2Q,cAAgB3Q,EAAK2Q,cAAcnQ,KAAnBf,OAAA6D,EAAA,EAAA7D,CAAAO,IACrBA,EAAK4Q,cAAgB5Q,EAAK4Q,cAAcpQ,KAAnBf,OAAA6D,EAAA,EAAA7D,CAAAO,IAbNA,6EAgBLsL,GACVrL,KAAKqK,SAAS,CAAErD,WAAYqE,0CAGlBvF,GAAO,IAAArE,EAAAzB,KACjB,OAAO,WAEH,IAAI4Q,EAAQC,GAAA,GACLpP,EAAK2I,MADA,CAERrD,QAAQ8J,GAAA,GAAMpP,EAAK2I,MAAMrD,WAE7B6J,EAAS7J,QAAQjB,IAAUrE,EAAK2I,MAAMrD,QAAQjB,GAC9CrE,EAAK4I,SAASuG,qCAIb,IAAAE,EAAA9Q,KACC0C,EAAQkE,EAAKC,OAAO7G,KAAKoK,OACzB2G,EAASnK,EAAKY,UAAUzB,YAAYrD,GAC1C,OACIiF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YAEVwI,GACG5I,EAAAC,EAAAC,cAACF,EAAAC,EAAMoI,SAAP,KACIrI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,QACXJ,EAAAC,EAAAC,cAACmJ,GAAD,CACItO,MAAOA,KAIfiF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACXJ,EAAAC,EAAAC,cAAC2I,GAAD,CAAW1K,MAAM,cAAcvC,MAAOwN,EAAOpM,WAC7CgD,EAAAC,EAAAC,cAAC2I,GAAD,CAAW1K,MAAM,eAAevC,MAAOwN,EAAOtM,cAC9CkD,EAAAC,EAAAC,cAAC2I,GAAD,CAAW1K,MAAM,UAAUvC,MAAOwN,EAAOrM,YAKnD,CAAE7C,GAAI,OAEZ8F,EAAAC,EAAAC,cAACoJ,GAAD,CACIrC,SAAU5O,KAAK2Q,cACfpN,MAAOvD,KAAKoK,MAAMpD,WAClBD,QAASvH,OAAOC,KAAKO,KAAKoK,MAAMrD,SAASrH,IAAI,SAAAoP,GACzC,MAAO,CACHhJ,MAAOgJ,EAAI,IACXG,QAAS6B,EAAKJ,cAAc5B,GAC5BJ,OAAQoC,EAAK1G,MAAMrD,QAAQ+H,QAIvCnH,EAAAC,EAAAC,cAAA,WAASE,UAAU,kBACfJ,EAAAC,EAAAC,cAACqJ,GAAD,CACIxO,MAAOA,aAxEOuF,IAAMC,WCEvBiJ,oLAGb,IAAMtP,EAAK7B,KAAK8D,MAAMsN,MAAMC,OAAOxP,GAC/B8D,EAAOiB,EAAKnC,YAAY7D,KAAKiB,GAI7BsK,EAAUxG,EAAK,aAAajG,IAAI,SAAA0M,GAAQ,OAAIxF,EAAKlC,OAAO9D,KAAKwL,KAE7DhI,EAAYwC,EAAKtC,SAASO,cAAchD,GAEtCyP,EAAgBlN,EAAU9E,OAC5BiS,EAAgBrP,EAAY0E,EAAKjC,SAASV,YAAYG,GAAW1E,IAAI,SAAAQ,GAAC,OAAIA,EAAE2B,MAAKvC,OAErF,OACIqI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBACVwI,GACG5I,EAAAC,EAAAC,cAACF,EAAAC,EAAMoI,SAAP,KACIrI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,QACXJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,SAASpC,EAAKqF,OAC5BrD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SACVoE,EAAQzM,IAAI,SAACgF,EAAQ/C,GAAT,OACTgG,EAAAC,EAAAC,cAAA,QAAMlI,IAAKgC,EAAGoG,UAAU,YACpBJ,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CAAMC,GAAE,YAAAjI,OAAcyB,EAAO7C,KAAO6C,EAAO6C,KAAP,GAAAtE,OAAiByB,EAAO6C,MAAU,MACrE,QAITI,EAAAC,EAAAC,cAAA,QAAME,UAAU,YACXpC,EAAK2G,UAAL,GAAArJ,OAAoB0C,EAAK2G,WAAe,MAG7C3E,EAAAC,EAAAC,cAAA,QAAME,UAAU,kBACXpC,EAAKC,KAAL,KAAA3C,OAAiB0C,EAAKC,MAAU,OAGzC+B,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACVpC,EAAK6L,IAAM7J,EAAAC,EAAAC,cAAA,KAAGmF,IAAI,sBAAsBD,OAAO,SAASE,KAAMtH,EAAK6L,KAAxD,oBAAqF,MAIrG7J,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACXJ,EAAAC,EAAAC,cAAA,mCAC2BF,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQwJ,EAAxB,IAAwCvF,KAAUxB,GAAOI,MAAMjG,SAASkG,SAAU0G,IACxG,IAFL,UAEgB5J,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQuJ,EAAxB,IAAwCtF,KAAU,WAAYsF,IAF9E,oBAOR3J,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACXJ,EAAAC,EAAAC,cAAC2I,GAAD,CAAW1K,MAAM,YAAYvC,MAAO+N,IACpC3J,EAAAC,EAAAC,cAAC2I,GAAD,CAAW1K,MAAO0E,GAAOI,MAAMjG,SAASmG,OAAQvH,MAAOgO,OAGhD,CAAE1P,KAAIyO,SAAU,gBAEvC3I,EAAAC,EAAAC,cAAA,WAASE,UAAU,kBACfJ,EAAAC,EAAAC,cAACqJ,GAAD,CAAYxO,MAAO0B,aA3DM6D,IAAMC,WCC9BuJ,eAEjB,SAAAA,EAAY3N,GAAO,IAAA/D,EAAA,OAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAyR,IACf1R,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAAiS,GAAA1O,KAAA/C,KAAM8D,KACDsG,MAAQ,GAFErK,wEAMf,ICnBiBqQ,EDmBXvO,EAAK7B,KAAK8D,MAAMsN,MAAMC,OAAOxP,GAC7B6P,EAAI9K,EAAKjC,SAAShE,aAAakB,GAErC,IAAK6P,EACD,OCvBatB,EDuBEpQ,KAAK8D,MAAMsM,SAASC,SCrBvC1I,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,iCAAyBuI,EAAzB,KACAzI,EAAAC,EAAAC,cAAA,2BDsBJ,IAAMgE,EAAejF,EAAKnC,YAAYP,WAAWrC,GAC3CuC,EAAYwC,EAAKtC,SAASJ,WAAWrC,GAI3C,OAFAL,QAAQmQ,IAAI,YAAavN,GAGrBuD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,gBACVwI,GACG5I,EAAAC,EAAAC,cAACF,EAAAC,EAAMoI,SAAP,KACIrI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,QACXJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,SAAS2J,EAAE1G,OACzBrD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACV2J,EAAE7P,IAGP8F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,yBACXJ,EAAAC,EAAAC,cAAA,KAAGoF,KAAMrG,EAAKa,MAAMf,gBAAgBgL,IAApC,IAAyC/J,EAAAC,EAAAC,cAACyC,EAAD,CAAQtC,KAAK,WAI1DL,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACXJ,EAAAC,EAAAC,cAAA,iBACU2C,GAAOI,MAAMjG,SAASkG,SADhC,mBACyDlD,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQ3D,EAAU9E,OAAlC,IAA2C0M,KAAU,OAAQ5H,EAAU9E,SAC3H,IAFL,UAEgBqI,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQ8D,EAAavM,OAArC,IAA8C0M,KAAU,cAAeH,EAAavM,SAFpG,oBAQRqI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SACXJ,EAAAC,EAAAC,cAACmJ,GAAD,CAAsBtO,MAAOmJ,IAC7BlE,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACXJ,EAAAC,EAAAC,cAAC2I,GAAD,CAAW1K,MAAM,YAAYvC,MAAOa,EAAU9E,SAC9CqI,EAAAC,EAAAC,cAAC2I,GAAD,CAAW1K,MAAM,eAAevC,MAAOsI,EAAavM,YAG7C,CAAEuC,KAAIyO,SAAU,aAGvC3I,EAAAC,EAAAC,cAAA,WAASE,UAAU,kBACfJ,EAAAC,EAAAC,cAACqJ,GAAD,CAAYxO,MAAOmJ,aAvDG5D,IAAMC,WEC3B0J,oLAIb,IAAM/P,EAAK7B,KAAK8D,MAAMsN,MAAMC,OAAOxP,GAC/B8D,EAAOiB,EAAKnC,YAAY7D,KAAKiB,GAC7B6C,EAASkC,EAAKlC,OAAO9D,KAAK+E,EAAK9D,IAC/BgK,EAAejF,EAAKnC,YAAYT,SAASnC,GACzCuC,EAAYwC,EAAKtC,SAASN,SAASnC,GACnC0P,EAAgBrP,EAAY0E,EAAKjC,SAASV,YAAYG,GAAW1E,IAAI,SAAAQ,GAAC,OAAIA,EAAE2B,MAAKvC,OAErF,OACIqI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mBAEVwI,GACG5I,EAAAC,EAAAC,cAACF,EAAAC,EAAMoI,SAAP,KACIrI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,QACXJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,SAASrD,EAAO6C,MAC9BI,EAAAC,EAAAC,cAAA,WAAMnD,EAAO8M,IAAIlS,OAAS,EAAIqI,EAAAC,EAAAC,cAAA,KAAGoF,KAAMvI,EAAO8M,KAAhB,kBAA0C,MACxE7J,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WACXJ,EAAAC,EAAAC,cAAA,iCACyBF,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQ3D,EAAU9E,OAAlC,IAA2C0M,KAAU,WAAY5H,EAAU9E,SAC/F,IAFL,MAEYqI,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQwJ,EAAxB,IAAwCvF,KAAUxB,GAAOI,MAAMjG,SAASkG,SAAU0G,IACzF,IAHL,UAGgB5J,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAQ8D,EAAavM,OAArC,IAA8C0M,KAAU,cAAeH,EAAavM,SAHpG,oBAQRqI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACXJ,EAAAC,EAAAC,cAAC2I,GAAD,CACI1K,MAAM,eACN+L,cAAc,cACdtO,MAAOsI,EAAavM,SACxBqI,EAAAC,EAAAC,cAAC2I,GAAD,CACI1K,MAAM,YACN+L,cAAc,WACdtO,MAAOa,EAAU9E,SACrBqI,EAAAC,EAAAC,cAAC2I,GAAD,CACI1K,MAAO0E,GAAOI,MAAMjG,SAASmG,OAC7B+G,cAAerH,GAAOI,MAAMjG,SAASkG,SACrCtH,MAAOgO,OAMvB,CAAE1P,KAAIyO,SAAU,WAGpB3I,EAAAC,EAAAC,cAAA,WAASE,UAAU,kBACfJ,EAAAC,EAAAC,cAACqJ,GAAD,CACIxO,MAAOmJ,aApDS5D,IAAMC,WCP/B,SAAS4J,GAAYC,GAEhC,OAAO,SAACjO,GACJ,OACI6D,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACXJ,EAAAC,EAAAC,cAACkK,EAAkBjO,SCHdkO,eAEjB,SAAAA,EAAYlO,GAAO,IAAA/D,EAAA,OAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAgS,IACfjS,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAAwS,GAAAjP,KAAA/C,KAAM8D,KACDsG,MAAQ,CACTyB,aAAcrC,IACd2C,QAAS5C,IACTuC,UAAWrC,KAGf1J,EAAKkS,aAAelS,EAAKkS,aAAa1R,KAAlBf,OAAA6D,EAAA,EAAA7D,CAAAO,IARLA,mFAYfsJ,EAAU,mBAAoBrJ,KAAKiS,6DlBevC5J,EkBXgB,oBlBWC,oDkBPb,IAAIwD,EAAerC,IACf2C,EAAU5C,IACVuC,EAAYrC,IAEhBzJ,KAAKqK,SAAS,CACVwB,eACAM,UACAL,+CAQJ,IAAMA,EAAY9L,KAAKoK,MAAM0B,UACzBK,EAAUnM,KAAKoK,MAAM+B,QACrBN,EAAe7L,KAAKoK,MAAMyB,aAM9B,OAJArK,QAAQmQ,IAAI7F,GACZtK,QAAQmQ,IAAIxF,GACZ3K,QAAQmQ,IAAI9F,GAGRlE,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBAEVwI,GACG5I,EAAAC,EAAAC,cAACF,EAAAC,EAAMoI,SAAP,KACIrI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,QACXJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,SAAd,qBACAJ,EAAAC,EAAAC,cAAA,mIAKJF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,SACXJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACXJ,EAAAC,EAAAC,cAAC2I,GAAD,CACI1K,MAAM,cACNvC,MAAOuI,EAAUxM,SAErBqI,EAAAC,EAAAC,cAAC2I,GAAD,CACI1K,MAAM,eACNvC,MAAOsI,EAAavM,SAExBqI,EAAAC,EAAAC,cAAC2I,GAAD,CACI1K,MAAM,UACNvC,MAAO4I,EAAQ7M,YAIZ,IAIvBqI,EAAAC,EAAAC,cAAA,WAASE,UAAU,kBACfJ,EAAAC,EAAAC,cAACqJ,GAAD,CAAYxO,MAAOoJ,IAEnBnE,EAAAC,EAAAC,cAACqJ,GAAD,CAAYxO,MAAOmJ,IACnBlE,EAAAC,EAAAC,cAACqJ,GAAD,CAAYxO,MAAOyJ,aAjFKlE,IAAMC,2lBCQ9C,SAAAgK,EAAYpO,GAAO,IAAA/D,EAAAP,OAAAa,EAAA,EAAAb,CAAAQ,KAAAkS,IACfnS,EAAAP,OAAAqD,EAAA,EAAArD,CAAAQ,KAAAR,OAAAsD,EAAA,EAAAtD,CAAA0S,GAAAnP,KAAA/C,KAAM8D,KAEDsG,MAAQ,GACbrK,EAAKoS,cAAgBpS,EAAKoS,cAAc5R,KAAnBf,OAAA6D,EAAA,EAAA7D,CAAAO,IAIrB,IAAIqS,EAAc,EACdC,EAAc,GACdC,EAAWC,YAAY,WACvBH,GAAe,EAEf,IAAII,EAAc,EACZC,EAAS,CAAC7L,EAAKlC,OAAQkC,EAAKnC,YAAamC,EAAKtC,SAAUsC,EAAKjC,UAEnE8N,EAAO/Q,QAAQ,SAAAgR,IACe,IAAtBA,EAAM1R,aAAwBwR,MAGlCA,IAAgBC,EAAOnT,QACvBS,EAAKoS,gBACLQ,cAAcL,KAEd9Q,QAAQmQ,IAAI,sCAAwCS,KACpDC,GACmB,IACf7Q,QAAQmQ,IAAI,cACZgB,cAAcL,MAGvB,IA/BY,OAAAvS,mFAmCfyB,QAAQmQ,IAAI,sBAEZhE,OAAOO,iBAAiB,sBAAuB,SAAC0E,GAK5CpR,QAAQmQ,IAAI,eACZiB,EAAEC,SAGFrR,QAAQmQ,IAAIiB,EAAEC,kDAMlB7S,KAAKqK,SAAS,CAAE/J,QAAQ,qCAKxB,OAAKN,KAAKoK,MAAM9J,OAGZqH,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACXJ,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CAAQ6H,SAAS,KACbnL,EAAAC,EAAAC,cAACkL,GAAA,EAAD,CAAOC,KAAK,IAAIC,UAAWnB,GAAYrB,IAAWyC,OAAK,IAEvDvL,EAAAC,EAAAC,cAACkL,GAAA,EAAD,CACIC,KAAK,oBACLG,OAAQ,SAACrP,GAAD,OAAWgO,GAAYX,GAAZW,CAAAsB,GAAA,CAA+B9C,SAAU,eAAkBxM,OAGlF6D,EAAAC,EAAAC,cAACkL,GAAA,EAAD,CACIC,KAAK,iBACLG,OAAQ,SAACrP,GAAD,OAAWgO,GAAYL,GAAZK,CAAAsB,GAAA,CAA4B9C,SAAU,YAAexM,OAG5E6D,EAAAC,EAAAC,cAACkL,GAAA,EAAD,CACIC,KAAK,eACLG,OAAQ,SAACrP,GAAD,OAAWgO,GAAYF,GAAZE,CAAAsB,GAAA,CAA0B9C,SAAU,UAAaxM,OAGxE6D,EAAAC,EAAAC,cAACkL,GAAA,EAAD,CACIC,KAAK,QACLC,UAAWnB,GAAYE,QAxBNrK,EAAAC,EAAAC,cAAA,gCA3DZI,IAAMC,wCCIpBmL,OAZf,WAEE,IAAMC,EAAgBC,qBAAUC,IAEhC,OACE7L,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACXJ,EAAAC,EAAAC,cAAC4L,GAAA7L,EAAD,MACAD,EAAAC,EAAAC,cAACyL,EAAD,QCDFI,GAAcC,QACW,cAA7BhG,OAAOyC,SAASwD,UAEe,UAA7BjG,OAAOyC,SAASwD,UAEhBjG,OAAOyC,SAASwD,SAASxC,MACvB,2DAuCN,SAASyC,GAAgBC,EAAOtJ,GAC9BuJ,UAAUC,cACPC,SAASH,GACT1S,KAAK,SAAA8S,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBhK,QACf2J,UAAUC,cAAcO,YAI1B/S,QAAQmQ,IACN,iHAKEnH,GAAUA,EAAOgK,UACnBhK,EAAOgK,SAASN,KAMlB1S,QAAQmQ,IAAI,sCAGRnH,GAAUA,EAAOiK,WACnBjK,EAAOiK,UAAUP,UAO5BQ,MAAM,SAAAnT,GACLC,QAAQD,MAAM,4CAA6CA,KC3FjEoT,IAASxB,OAAOxL,EAAAC,EAAAC,cAAC+M,GAAD,MAAS9G,SAAS+G,eAAe,SDgB1C,SAAkBrK,GAEvB,GADAhJ,QAAQmQ,IAAI,8BACiC,kBAAmBoC,UAAW,CAGzE,GADkB,IAAIe,IAAIC,wBAAwBpH,OAAOyC,SAASnD,MACpD+H,SAAWrH,OAAOyC,SAAS4E,OAIvC,OAGFrH,OAAOO,iBAAiB,OAAQ,WAC9B,IAAM4F,EAAK,GAAA7Q,OAAM8R,wBAAN,sBAEPrB,IAgEV,SAAiCI,EAAOtJ,GAEtCrJ,MAAM2S,GACH1S,KAAK,SAAA6T,GAEJ,IAAMC,EAAcD,EAASE,QAAQC,IAAI,gBAEnB,MAApBH,EAASvG,QACO,MAAfwG,IAA8D,IAAvCA,EAAY7S,QAAQ,cAG5C0R,UAAUC,cAAcqB,MAAMjU,KAAK,SAAA8S,GACjCA,EAAaoB,aAAalU,KAAK,WAC7BuM,OAAOyC,SAASmF,aAKpB1B,GAAgBC,EAAOtJ,KAG1BkK,MAAM,WACLlT,QAAQmQ,IACN,mEArFA6D,CAAwB1B,EAAOtJ,GAI/BuJ,UAAUC,cAAcqB,MAAMjU,KAAK,WACjCI,QAAQmQ,IACN,gHAMJkC,GAAgBC,EAAOtJ,MCxC/BwJ","file":"static/js/main.beb26ce1.chunk.js","sourcesContent":["export default function(obj, keyField=\"id\"){\n\n    return Object.keys(obj).map( key => {\n\n        let ret = {\n            ...obj[key],\n        }\n\n        ret[keyField] = key;\n\n        return ret;\n    });\n}","import dictToArray from \"./dictToArray\";\n\nexport default class BasicAPIEndpoint{\n\n    /**\n     * @constructor\n     * @alias Data.BasicAPIEndpoint\n     * @param {Object} obj \n     */\n    constructor(obj, headerKey=x=>{}, typeKey=x=>{}, fireWhenLoaded=()=>{}){\n\n        this.loaded = false;\n\n        this.headerKey = headerKey.bind(this);\n        this.typeKey = typeKey.bind(this);\n\n        this.resourceDictionary = obj;\n        this.resourceArray = dictToArray(obj);\n\n        this.all = this.all.bind(this);\n        this.dictionary = this.dictionary.bind(this);\n        this.byId = this.byId.bind(this);\n        this.filter = this.filter.bind(this);\n        this.find = this.find.bind(this);\n        this.handleData = this.handleData.bind(this);\n        this.fireWhenLoaded = fireWhenLoaded.bind(this);\n        this.hasLoaded = this.hasLoaded.bind(this);\n\n        // If we're given a URL, load that, otherwise\n        // use the object directly as the API content\n        if (obj.hasOwnProperty(\"fetch-data-url\")){\n            // load data asynchronously and ignore the rest\n            const url = obj[\"fetch-data-url\"];\n            fetch(url)\n            .then(res => res.json())\n            .then(\n                (obj)=>this.handleData(obj),\n                (error)=>{console.error(\"Error loading data \" + url, error)}\n            );\n\n        } else {\n            this.handleData(obj);\n        }\n    }\n\n    /**\n     * Determine if the data has loaded\n     */\n    hasLoaded(){ return this.loaded; }\n\n    /**\n     * Handle the data object when it arrives\n     * @param {Object} obj \n     */\n    handleData(obj){\n        // insert a a\n        Object.keys(obj).forEach(k=>{\n            let o = obj[k];\n            o[\"id\"] = k\n            o[\"__header\"] = this.headerKey(o);\n            o[\"__type\"] = this.typeKey(o);\n        });\n\n        this.resourceDictionary = obj;\n        this.resourceArray = dictToArray(obj);\n        this.loaded = true;\n        this.fireWhenLoaded();\n\n    }\n    \n    /**\n     * Get a dictionary index of all items\n     * @memberof Data.BasicAPIEndpoint\n     */\n    dictionary(){ \n        return this.resourceDictionary;\n    }\n\n    /**\n     * Get an array of all items\n     * @memberof Data.BasicAPIEndpoint\n     */\n    all(){ \n        return this.resourceArray;\n    }\n\n    /**\n     * Find one item by id or undefined\n     * @param {string} id \n     * @memberof Data.BasicAPIEndpoint\n     */\n    byId(id, keyField=\"id\"){\n        let ret = Object.assign({}, this.dictionary()[id]);\n        \n        // insert the id \n        ret[keyField] = id;\n        return ret;\n    }\n\n    /**\n     * Get an array of all items i for which f(i) returns True\n     * @param {function} f \n     * @memberof Data.BasicAPIEndpoint\n     */\n    filter(f){\n        return this.all().filter(f);\n    }\n\n    /**\n     * Get item that matches f(i) if only one item matches f(i). Fail if multiple items return true\n     * @param {function} f \n     * @memberof Data.BasicAPIEndpoint\n     */\n    find(f){\n\n        const matches = this.filter(f);\n\n        if (matches.length === 1){ return matches[0]}\n\n        if (matches.length < 1){\n            throw new Error (\"Error: More than one result found matching criteria\");\n        }\n        else if (matches.length > 0){\n            throw new Error(\"Error: No results found\");\n        }\n    }\n\n}","export default function (arr, key=x=>x) {\n    const loaded = [];\n    const ret =  arr\n        .filter(x => { // x is a footnote\n            const kx = key(x)\n            if (!x) { return null }\n            if (loaded.indexOf(kx) >= 0) {\n                return false;\n            }\n            loaded.push(kx);\n            return true;\n        });\n    return ret;\n}         ","export default class FussyArray extends Array {\n\n    constructor(...items){\n        super(...items);\n        this.dict = {};\n        this.ks = [];\n\n        this.add = this.add.bind(this);\n        this.addArray = this.addArray.bind(this);\n    }\n\n    add(key, value){\n        if (!value){ value = key}\n        if (this.ks.indexOf(String(key)) >= 0){ return; }\n        if (this.ks.includes(key)){ return; }\n        this.dict[key] = value;\n        this.ks = Object.keys(this.dict);\n        this.push(value);\n        // console.log(\"Added \", value, \" to \", this)\n    }\n\n    addArray(arr, keyFunc=x=>x){\n        // arr.forEach( item => {\n        //     this.add(keyFunc(item),item);\n\n        // })\n        for (var i = 0; i < arr.length; i++){\n            this.add(keyFunc(arr[i]), arr[i]);\n        }\n    }\n\n}","import BasicAPIEndpoint from \"./BasicAPIEndpoint\";\nimport footnote from \"./footnote\";\n// import resource from \"./resource\";\nimport uniqueArray from \"./utils/uniqueArray\";\nimport FussyArray from \"./utils/FussyArray\";\n\n/** \n * Adds a byAuthor search convenience method\n * @class Data.PublicationAPIEndpoint\n * @extends Data.BasicAPIEndpoint\n */\nclass PublicationAPIEndPoint extends BasicAPIEndpoint {\n\n    /**\n     * @constructor\n     * @alias Data.PublicationAPIEndpoint\n     * @param {Object} props \n     */\n    constructor(props){\n        super(props, x=>x[\"title\"], _=>\"publication\");\n\n        this.byAuthor = this.byAuthor.bind(this);\n        this.inFootnotes = this.inFootnotes.bind(this);\n        this.byResource = this.byResource.bind(this)\n    }\n\n    /**\n     * Get publications by a given author\n     * @param {string} authorId \n     * @returns {Array}\n     * @method Data.PublicationAPIEndpoint#byAuthor\n     */\n    byAuthor(authorId){\n        //return  this.filter(x=>x[\"author.id\"] === authorId)\n\n        // Refactored to support multiple authors\n        return this.filter(x=>x[\"author.id\"].indexOf(authorId) >= 0)\n    }\n\n    \n    inFootnotes(footnotes){\n\n        // let ret = new FussyArray();\n        // ret.addArray(footnotes.map(x => this.byId(x[\"publication.id\"])))\n\n        // return ret; \n\n        return uniqueArray(\n            footnotes.map(x => this.byId(x[\"publication.id\"])),\n            x=>x[\"id\"]\n        )\n    }\n\n    /**\n     * Get publications that cite a given resource\n     */\n    byResource(resourceId){\n        return this.inFootnotes(footnote.byResource(resourceId))\n\n        // let ret = [];\n        // footnotes.forEach(f => {\n        //     if (ret.indexOf(f) >= 0){ return }\n        //     ret.push(f)\n        // })\n        // return ret;\n    }\n\n}\n\nconst endpoint = new PublicationAPIEndPoint({\"fetch-data-url\":\"data/publication.json\"});\n/**\n * @memberof module:Data\n * @alias publication\n * @type {Data.PublicationAPIEndpoint}\n */\nexport default endpoint;\n\n//export default new PublicationAPIEndPoint(require(\"./json/publication.json\"));","// entity types\n\nconst entity = {\n    publication: \"publication\",\n    author: \"author\",\n    footnote: \"footnote\",\n    resource: \"resource\"\n};\n\nexport default entity;","import BasicAPIEndpoint from \"./BasicAPIEndpoint\";\nimport publication from \"./publication\";\nimport entity from \"./enums\";\n// import timeStampToSeconds from \"./utils/timestampToSeconds\";\n\n/**\n * @class Data.FootnoteAPIEndpoint\n * @extends Data.BasicAPIEndpoint\n */\nclass FootnoteAPIEndpoint extends BasicAPIEndpoint{\n    constructor(props){\n        super(props, x=>publication.byId(x[\"publication.id\"]), _=>entity.footnote);\n        this.byPublication = this.byPublication.bind(this);\n        this.byAuthor = this.byAuthor.bind(this);\n        this.byResource = this.byResource.bind(this);\n    }\n\n    /**\n     * Get a list of footnotes for a given publication\n     * @returns {Array}\n     * @param {string} publicationId \n     */\n    byPublication(publicationId){\n        return this.filter(x => x[\"publication.id\"] === publicationId);\n    }\n\n    /**\n     * Get a list of footnotes for a given resource\n     * @param {string} resourceId \n     * @returns {Array}\n     */\n    byResource(resourceId){\n        return this.filter(x => x[\"resource.id\"] === resourceId);\n    }\n\n    /**\n     * Get all of an author's footnotes\n     * @param {string} authorId \n     * @returns {Array}\n     */\n    byAuthor(authorId){\n        let ret = []\n        \n        publication.byAuthor(authorId)\n            .forEach(x=> {\n                ret = ret.concat(this.byPublication(x[\"id\"]));\n            });\n            \n        return ret;\n    }\n\n    /**\n     * This is a helper method to get a URI of a footnote object.\n     * This code is specific to the Fortunoff archive\n     * @param {*} footnote \n     */\n    getFootnoteURI(footnote){\n\n        /*\n         * example: https://fortunoff.aviaryplatform.com/c/mssa.hvt.0007/2/460\n         */\n\n\n         const aviary_url = \"https://fortunoff.aviaryplatform.com/\"\n\n        const resourceID = footnote[\"resource.id\"].trim();\n        if (resourceID.indexOf(\"HVT-\") < 0){ return aviary_url; }\n        const mssid = \"mssa.hvt.\" + resourceID.slice(4);\n\n        const videoBaseURL = \"https://fortunoff.aviaryplatform.com/c/\" + mssid + \"/\";\n\n\n        // if there's a full time stamp we can use that.\n        if (!footnote[\"tape\"]){ return videoBaseURL}\n        const tape = Number(footnote[\"tape\"]);\n        const start_time = Math.round(footnote[\"start_time\"])//.trim();\n\n        if (!tape || start_time.length < 1){ return videoBaseURL; } \n\n        // const seconds = timeStampToSeconds(start_time);\n\n        return videoBaseURL + Math.round(tape) + \"/\" + start_time;\n\n    }\n\n}\n\n/**\n * @memberof module:Data\n * @alias footnote\n * @type {Data.FootnoteAPIEndpoint}\n */\n\nconst endpoint = new FootnoteAPIEndpoint({\"fetch-data-url\":\"data/footnote.json\"});\nexport default endpoint;\n\n","import BasicAPIEndpoint from \"./BasicAPIEndpoint\";\n// import publication from \"./publication\";\nimport footnote from \"./footnote\";\nimport uniqueArray from \"./utils/uniqueArray\";\n\n/**\n * Adds conveninece functions for resources\n * @class Data.ResourceAPIEndpoint\n * @extends Data.BasicAPIEndpoint\n */\nclass ResourceAPIEndpoint extends BasicAPIEndpoint {\n    constructor(props) {\n        super(props, x=>x[\"title\"], _=>\"resource\");\n\n        this.citedByAuthor = this.citedByAuthor.bind(this);\n        this.inFootnotes = this.inFootnotes.bind(this);\n        this.byPublication = this.byPublication.bind(this);\n        this.citedByAuthor = this.citedByAuthor.bind(this);\n    }\n\n    /**\n     * Get all of the resources referenced in a given collection of footnotes\n     * @param {Array} footnotes \n     */\n    inFootnotes(footnotes) {\n\n        return uniqueArray(\n            footnotes\n            .map(x => {\n                return this.byId(x[\"resource.id\"])\n            })\n        )\n        // const loaded = [];\n        // return footnotes\n        //     .map(x => {\n        //         return this.byId(x[\"resource.id\"])\n        //     })\n        //     .filter(x => { // x is a footnote\n        //         if (!x) { return }\n        //         if (loaded.indexOf(x[\"title\"]) >= 0) {\n        //             return false;\n        //         }\n        //         loaded.push(x[\"title\"]);\n        //         return true;\n        //     })\n    }\n\n    /**\n     * Return all of the resources in a given publication\n     * @param {string} publicationId \n     */\n    byPublication(publicationId) {\n        return this.inFootnotes(footnote.byPublication(publicationId));\n    }\n\n    /**\n     * Return all of the resources cited by an author\n     * @param {string} authorId \n     */\n    citedByAuthor(authorId) {\n\n        return this.inFootnotes(footnote.byAuthor(authorId));\n\n    }\n\n}\n\nconst endpoint = new ResourceAPIEndpoint({\"fetch-data-url\":\"data/resource.json\"});\n\n/**\n * @memberof module:Data\n * @alias resource\n * @type {Data.ResourceAPIEndpoint}\n */\nexport default endpoint;\n// export default new ResourceAPIEndpoint(require(\"./json/resource.json\"));","\nimport BasicAPIEndpoint from \"./BasicAPIEndpoint\";\nimport entity from \"./enums\";\n\n/**\n * @memberof module:Data\n * @alias author\n * @type {Data.BasicAPIEndpoint}\n */\n\nconst endpoint = new BasicAPIEndpoint({\"fetch-data-url\":\"data/author.json\"}, x=>x[\"name\"], x=>entity.author);\nexport default endpoint;","function yearCounts(items){\n    var ret = {};\n    items.forEach(item => {\n        if (Number(item.date) && (String(item.date).length === 4)) {\n            if (!ret[item.date]) { ret[item.date] = { count: 0, label: item.date } }\n            ret[item.date].count += 1;\n        }\n    })\n    ret = Object.keys(ret).map(k => ret[k]);\n    return ret;\n}\n\nfunction countByType(items){\n    let ret = {\n        publication:0,\n        footnote:0,\n        resource:0,\n        author:0\n    }\n    items.forEach(item=>{\n        if(!ret[item.__type]){ ret[item.__type] = 0 }\n        ret[item.__type] += 1;\n    })\n    return ret;\n}\n\nexport {\n    yearCounts,\n    countByType\n}","export default function secondsToTimestamp(seconds){\n    // return `SECONDS: ${seconds}`\n\n    const h = Math.floor(seconds / (60 * 60));\n\n    let remaining = seconds - (h * 60 * 60);\n\n    const m = Math.floor(remaining / 60);\n\n    remaining = remaining - (60 * m)\n\n    const s = Math.floor(remaining)\n\n    const seg = x => String(x).padStart(2, '0')\n\n    return `${seg(h)}:${seg(m)}:${seg(s)}`\n\n}","export default function getResourceLink(resource) {\n    /*\n     * example: https://fortunoff.aviaryplatform.com/c/mssa.hvt.0007/2/460\n     */\n\n     // Drop the \"HVT-\" part\n     const num = String(resource.id.slice(4)).padStart(4, '0');\n\n     return `https://fortunoff.aviaryplatform.com/c/mssa.hvt.${num}`\n}","/** \n * Data API\n * \n * @module Data\n * @exports Data.author\n */\nimport resource from \"./resource\";\nimport footnote from \"./footnote\";\nimport publication from \"./publication\";\nimport author from \"./author\";\nimport FussyArray from \"./utils/FussyArray\";\nimport * as summarize from \"./summarize\";\nimport * as utils from \"./utils\";\n\n/**\n * Search authors, publications and resources\n * @param {Object} options \n */\nfunction search(options) {\n\n    options = options || {};\n    const toggles = options.toggles || {};\n    const searchTerm = options.searchTerm || \"\";\n\n    let results = new FussyArray();\n\n    function searchEntity(entity, field, api) {\n\n        if (toggles[entity] !== true) { return[]; }\n\n        return api.filter(x => {\n            // const tmpId = `entity.${x[\"id\"]}`;\n            const fofx = field(x);\n\n            // if (searchTerm.trim().length < 1){ return added.indexOf(tmpId) < 0 ; }\n\n            if (searchTerm.trim().length < 1){ return true ; }\n            if (!fofx) { return false }\n            const ret = fofx.toLowerCase().indexOf(searchTerm.toLowerCase()) >= 0;\n\n            if (ret){ //&& (added.indexOf(tmpId) < 0)){\n                return true;\n            }\n\n            return false;\n        })\n    }\n\n    // search for authors by name\n    results.addArray(searchEntity(\"author\", x=>x[\"name\"], author), x=>\"author.\" + x[\"id\"]);\n\n\n    // search for resources by title\n    results.addArray(searchEntity(\"resource\", x=>x[\"title\"], resource), x=>\"resource.\" + x[\"id\"])\n\n    // Search for publications by author name\n    results.addArray(searchEntity(\"publication\", x=>author.byId(x[\"author.id\"]).name, publication), x=>\"publication.\" + x[\"id\"]);\n\n    // search for publications by title\n    results.addArray(searchEntity(\"publication\", x=>x[\"title\"], publication), x=>\"publication.\" + x[\"id\"])\n    \n    // results = uniqueArray(results, x=>x[\"__type\"] + \".\" + x[\"id\"]);\n\n    return results;\n}\n\nexport default {\n    author,\n    footnote,\n    publication,\n    resource,\n    search,\n    summarize,\n    utils\n}","import React from 'react';\nimport \"./style/main.scss\"\n\nexport default class ToggleButton extends React.Component {\n\n\n    render() {\n\n        return <div\n            onClick={this.props.onClick}\n            className=\"Button\">{this.props.text}\n        </div>\n    }\n}","import Data from \"../Data\";\n\n// Set local or session storage;\nconst storage = localStorage;\nlet callbacks = {};\n\nfunction hasStorage(){\n    try{\n        storage.setItem(\"canary\",Date.now())\n        storage.removeItem(\"canary\");\n    } catch {\n        return false;\n    }\n    return true;\n}\n\nfunction listID(type){ return \"yale-fortunoff-cdb-\" + type}\n\nfunction getList(type){\n    if (!hasStorage()){ return[]; }\n    const ret = storage.getItem(listID(type));\n    if (!ret){ return []}\n    try{\n        return JSON.parse(ret);\n    } catch {\n        return [];\n    }\n}\n\nfunction setList(type, arr){\n    if (!hasStorage()){ return; }\n    storage.setItem(listID(type), JSON.stringify(arr));\n    Object.keys(callbacks).forEach( k => callbacks[k]());\n}\n\n\nfunction unsubscribe(key){\n    callbacks[key] = ()=>{};\n}\nfunction subscribe(key, f){\n    callbacks[key] = f;\n}\n\nfunction addItem(type, id){\n    let arr = getList(type);\n\n    if (arr.indexOf(id) >= 0){ return; }\n\n    arr.push(id);\n    setList(type, arr);\n}\n\nfunction removeItem(type, id){\n    let arr = getList(type).filter(x=> x!==id);\n    setList(type, arr);\n\n}\n\nconst key = {\n    resource:\"resource\",\n    publication:\"publication\",\n    author:\"author\"\n}\n\nfunction getSavedAuthors(){ return getList(key.author).map(id=>Data.author.byId(id))}\nfunction getSavedPublications(){ return getList(key.publication).map(id=>Data.publication.byId(id))}\nfunction getSavedResources(){ return getList(key.resource).map(id=>Data.resource.byId(id))}\n\nfunction saveResource(id){ addItem(key.resource, id)}\nfunction savePublication(id){ addItem(key.publication, id)}\nfunction saveAuthor(id){ addItem(key.author, id)}\n\nfunction removeResource(id){ removeItem(key.resource, id)}\nfunction removePublication(id){ removeItem(key.publication, id)}\nfunction removeAuthor(id){ removeItem(key.author, id)}\n\nexport {\n    getSavedAuthors,\n    getSavedPublications,\n    getSavedResources,\n    saveAuthor,\n    savePublication,\n    saveResource,\n    removeAuthor,\n    removePublication,\n    removeResource,\n    subscribe,\n    unsubscribe\n    \n}","import React from \"react\";\nimport Button from \"../Button\";\nimport * as storage from \"../SavedItemStorage\";\n\n/**\n * The author page\n */\nexport default class SaveButton extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        if (this.props.type === \"resource\") {\n            this.saveItem = storage.saveResource;\n            this.removeItem = storage.removeResource;\n            this.getSavedItems = storage.getSavedResources;\n        } else if (this.props.type === \"author\") {\n            this.saveItem = storage.saveAuthor;\n            this.removeItem = storage.removeAuthor;\n            this.getSavedItems = storage.getSavedAuthors;\n        } else if (this.props.type === \"publication\") {\n            this.saveItem = storage.savePublication;\n            this.removeItem = storage.removePublication;\n            this.getSavedItems = storage.getSavedPublications;\n        } else {\n            return;\n        }\n\n        this.isSaved = this.isSaved.bind(this);\n\n        this.state = {\n            isSaved: this.isSaved()\n        }\n\n    }\n\n    isSaved() {\n        return this.getSavedItems().map(x => x.id).indexOf(this.props.id) >= 0\n    }\n\n    setSaved() {\n        this.setState({ isSaved: this.isSaved() })\n    }\n\n    render() {\n        if ([\"publication\", \"author\", \"resource\"].indexOf(this.props.type) < 0) { return (null) }\n\n        return (<div className={`SaveButton ${this.state.isSaved ? \"unsave\" : \"save\"}`}>\n            {\n                this.isSaved() ?\n                    <Button onClick={() => { this.removeItem(this.props.id); this.setSaved() }} text=\"unpin\"></Button>\n                    :\n                    <Button onClick={() => { this.saveItem(this.props.id); this.setSaved() }} text=\"pin\"></Button>\n            }\n        </div>)\n\n    }\n}","export default {\n    histogram:{\n        minYear: 1975,\n        maxYear: 2020\n    },\n    words:{\n        resource:{\n            singular: \"testimony\",\n            plural: \"testimonies\"\n        }\n    }\n}","import React from 'react';\nimport Data from \"../../Data\";\nimport { Link } from \"react-router-dom\";\nimport entity from \"../../Data/enums\";\nimport \"../style/main.scss\";\nimport Button from \"../../Button\";\nimport SaveButton from \"../../SaveButton\";\nimport pluralize from \"pluralize\";\n\nimport config from \"../../config\"\n\nclass PillTray extends React.Component {\n    render() {\n        return (\n            <div className={`pill-tray-wrapper ${this.props.title}`}>\n\n                <div className=\"pill-tray\">\n                    <div className={`pill-tray-title`}>{this.props.items.length} {this.props.title}</div>\n\n                    {this.props.items.slice(0, 5).map((item, i) => {\n\n                        return (\n                            <div key={i} className=\"pill\">\n                                <Link to={item.link}>{item.title}</Link>\n                            </div>)\n                    })}\n                </div>\n            </div>\n\n        )\n    }\n}\n\nclass HeaderLink extends React.Component {\n\n    render() {\n        const term = this.props.type + \"s\";\n\n        if (this.props.type === entity.footnote) {\n            const f = this.props.item;\n            const resource = Data.resource.byId(this.props.item[\"resource.id\"]);\n            return (\n                <div className=\"HeaderLink\">\n                    <Link to={`/resources/${resource.id}`}>{resource.title} {f[\"start_time\"] ? `@${Data.utils.secondsToTimestamp(f[\"start_time\"])}` : (null)}</Link>\n                </div>)\n        }\n\n        // Otherwise, it's pretty standard\n\n        return <Link\n            to={`/${term}/${this.props.item.id}`}\n        >{this.props.header}</Link>\n    }\n\n}\n\nclass ItemHeader extends React.Component {\n    render() {\n        let label = this.props.type\n        if (config.words.hasOwnProperty(this.props.type)){\n            label = config.words[label].singular;\n        }\n        \n        return (\n            <div className=\"ItemHeader\">\n                <div className=\"badge result-type\">[{label}]</div>\n                {\" \"}<HeaderLink {...this.props}></HeaderLink>\n            </div>\n        )\n    }\n}\n\nclass FootnoteFooter extends React.Component {\n\n    render() {\n        // const publication = Data.publication.byId(this.props.item[\"publication.id\"]);\n\n        return (\n            <div>\n                {this.props.item.text ? `\"${this.props.item.text}\"` : (null)}\n                <div>\n                    <span className=\"metadata light\">\n                        {this.props.item.chapter ? `${this.props.item.chapter}, ` : (null)}\n                    </span>\n                    <span className=\"metadata light\">\n                        {this.props.item.page ? `page ${this.props.item.page} ` : (null)}\n                    </span>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass AuthorFooter extends React.Component {\n    render() {\n        const publications = Data.publication.byAuthor(this.props.item.id);\n        const resources = Data.resource.citedByAuthor(this.props.item.id);\n        // const footnotes = Data.footnote.byAuthor(this.props.item.id);\n        return (\n            <div>\n                <div>\n\n                    {/* {resources.length} resources */}\n                    <PillTray title={pluralize(\"publications\", publications.length)} items={publications.map(x => { return { \"title\": x.title, \"link\": `/publications/${x.id}` } })} />\n                </div>\n                <div>\n                    <PillTray title={pluralize(config.words.resource.singular, resources.length) + \" cited\"} items={resources.map(x => { return { \"title\": x.title, \"link\": `/resources/${x.id}` } })} />\n                </div>\n                {/* <div>\n                {footnotes.length} footnotes\n                </div> */}\n            </div>\n\n        );\n    }\n}\n\nclass ResourceFooter extends React.Component {\n    render() {\n\n        const footnotes = Data.footnote.byResource(this.props.item.id);\n        const publications = Data.publication.inFootnotes(footnotes)\n        return (\n            <div>\n                <div>\n                    <span className=\"metadata light\">{this.props.item.id}</span>\n                </div>\n                <div>\n                    <PillTray title={pluralize(\"publication\", publications.length)} items={publications.map(x => { return { \"title\": x.title, \"link\": `/publications/${x.id}` } })} />\n                    {/* {footnotes.length > 1 ? `${footnotes.length} citations` : `${footnotes.length} citation`} */}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass PublicationFooter extends React.Component {\n    render() {\n        const publication = this.props.item;\n        // const authors = (Data.author.byId(this.props.item[\"author.id\"]) || {});\n\n        // Refactored to support multiple authorsd\n        const authorIDs = this.props.item[\"author.id\"] || [];\n        const authors = authorIDs.map(authorID => {\n            let ret = Data.author.byId(authorID) || {};\n            return ret;\n        })\n\n        const resources = Data.resource.byPublication(this.props.item.id)\n\n        return (\n            <div>\n                <div >\n                    {authors.map((author, idx)=>{\n                        return author.name ? (<span key={idx} className=\"metadata\"><Link to={`/authors/${author.id}`}>{author.name}</Link></span>) : (null);\n                    })}\n                    {/* {author.name ? (<span className=\"metadata\"><Link to={`/authors/${author.id}`}>{author.name}</Link></span>) : (null)} */}\n                    {publication.publisher ? (<span className=\"metadata light\">, {publication.publisher}</span>) : (null)}\n                    {publication.date ? (<span className=\"metadata light\">, {publication.date}</span>) : (null)}\n\n\n                </div>\n                <div>\n                    <PillTray title={pluralize(config.words.resource.singular, resources.length) + \" cited\"} items={resources.map(x => { return { \"title\": x.title, \"link\": `/resources/${x.id}` } })} />\n                </div>\n                {/* <div>\n                    {this.props.item.date ? this.props.item.date + \", \" : (null)}\n                    {this.props.item.publisher ? this.props.item.publisher : (null)}\n                </div> */}\n\n            </div>\n\n        );\n    }\n}\n\nclass Footer extends React.Component {\n    render() {\n        if (this.props.type === \"author\") { return <AuthorFooter {...this.props}></AuthorFooter>; };\n        if (this.props.type === \"publication\") { return <PublicationFooter {...this.props}></PublicationFooter>; };\n        if (this.props.type === \"resource\") { return <ResourceFooter {...this.props}></ResourceFooter>; };\n        if (this.props.type === \"footnote\") { return <FootnoteFooter {...this.props}></FootnoteFooter>; };\n        return (<div className=\"Footer\"></div>)\n    }\n}\n\nexport default class ResultListItem extends React.Component {\n    render() {\n        return (\n            <div className={`ResultListItem ${this.props.type}`}>\n                {/* <div className=\"left-end\"></div> */}\n                <div className=\"content-area\">\n                    <header>\n                        <ItemHeader {...this.props}></ItemHeader>\n                    </header>\n                    <footer>\n                        <Footer {...this.props}></Footer>\n                    </footer>\n                </div>\n                {\n                    this.props.type === \"footnote\" ?\n                        (<a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href={Data.footnote.getFootnoteURI(this.props.item)}\n                        // href={this.props.item.uri}\n                        >\n                            {/* <div className=\"button\"> view</div> */}\n                            <Button text=\"View\"></Button>\n                        </a>)\n                        : (null)\n                }\n                {\n                    <SaveButton type={this.props.type} id={this.props.item.id} />\n                }\n            </div>\n        )\n    }\n}","import React from 'react';\nimport ResultListItem from \"./ResultListItem\";\n// import CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\n\nimport \"./style/main.scss\";\n\nexport default class ResultList extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            itemCount:25,\n            step:10\n        }\n\n        this.loadMore = this.loadMore.bind(this);\n        this.trackScrolling = this.trackScrolling.bind(this);\n    }\n\n\n    decideToIncrement(distanceFromBottom){\n        if (this.props.items.length > this.state.itemCount\n            && distanceFromBottom < 100) {\n            this.loadMore();\n        }\n\n    }\n\n    trackScrolling() {\n\n        const scrollBottom = window.pageYOffset + window.innerHeight;\n        const distanceFromBottom = window.document.body.offsetHeight - scrollBottom;\n        this.decideToIncrement(distanceFromBottom);\n    }\n\n    componentDidMount() {\n        document.addEventListener(\"scroll\", this.trackScrolling);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"scroll\", this.trackScrolling);\n    }\n\n\n    loadMore(){\n        const itemCount = this.state.itemCount + this.state.step;\n        this.setState({itemCount});\n    }\n\n    render() {\n        const items = this.props.items.sort(\n            (a,b)=>{ return a.__header > b.__header ? 1 : -1}\n            ).map((x, i) => {\n                return <ResultListItem \n                key={i}\n                item={x}\n                type={x.__type}\n                header={x.__header}\n                ></ResultListItem>\n        }).slice(0, this.state.itemCount);\n        return (\n            <div className=\"ResultList\">\n                {items}\n               {/* <CSSTransitionGroup\n               transitionName=\"dialog\"\n               transitionEnterTimeout={10}\n               transitionLeaveTimeout={10}>\n                   {items}\n               </CSSTransitionGroup> */}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport \"./style/main.scss\"\nimport Button from \"../Button\";\n\nexport default class ToggleButton extends React.Component {\n\n    render() {\n        return (\n            <div\n                onClick={this.props.handleClick}\n                className={`ToggleButton ${this.props.itemType} ${this.props.status ? \"on\" : \"off\"}`}>\n                <Button text={this.props.label}></Button>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport { TextInput } from \"@bit/jakekara.metadash.inputs\";\nimport ToggleButton from \"../ToggleButton\";\nimport pluralize from \"pluralize\";\n\nimport config from \"../config\";\n\nexport default class extends React.Component {\n    render() {\n        return (\n\n            <div>\n                <section className=\"SearchArea column-wrapper\">\n                    <TextInput\n                        callback={this.props.callback}\n                        value={this.props.value}\n                        placeholder={`Search by author, publication title or ${config.words.resource.singular}...`}\n                    ></TextInput>\n                </section>\n                <section className=\"toggle-box column-wrapper\">\n                    <div className=\"label\"></div>\n                    {this.props.toggles.map((t, i) => {\n\n                        let label = t.label;\n\n                        const wordsKey = pluralize(label, 1);\n                        if (config.words.hasOwnProperty(wordsKey)){\n                            label = config.words[wordsKey].plural\n                        }\n\n                        return <ToggleButton\n                            key={i}\n                            handleClick={t.handler}\n                            label={label}\n                            itemType={t.label}\n                            status={t.status}\n                        ></ToggleButton>\n                    })}\n                </section>\n            </div>\n        )\n    }\n}","import React from \"react\";\nimport { Histogram } from '@bit/jakekara.metadash.viz';\nimport Data from \"../Data\";\nimport config from \"../config\";\n\nexport default class extends React.Component {\n\n    render() {\n        const data = Data.summarize.yearCounts(\n            this.props.items.filter(item => item.__type === \"publication\")\n        );\n\n        if (data.length < 1){ return (null)}\n        return (\n            <div className=\"PublicationHistogram\">\n                <Histogram\n                    data={data}\n                    minYear={config.histogram.minYear}\n                    maxYear={config.histogram.maxYear}\n                    margin={{\n                        top: 10,\n                        left: 30,\n                        right: 10,\n                        bottom: 20\n                    }}\n                ></Histogram>\n                <h6 className=\"center\">Publications by year</h6>\n            </div>\n        )\n    }\n}","import React, {useState} from \"react\";\nimport Button from \"../Button\";\n\nimport { getSavedAuthors, getSavedPublications, getSavedResources, subscribe } from \"../SavedItemStorage\";\nimport { Link } from \"react-router-dom\";\nimport pluralize from \"pluralize\";\n\n\nexport default function () {\n\n    const getCurrentCount = () => {\n        return getSavedAuthors().length + getSavedPublications().length + getSavedResources().length;\n    }\n    const [count, setCount] = useState(getCurrentCount());\n    \n    const updateCount = () => {\n        setCount(getCurrentCount());\n    }\n    subscribe(\"counter\",updateCount)\n\n    return (<React.Fragment>\n        {count > 0 ? (<Link className=\"PinsButton\" to=\"/pins\"><Button text={pluralize(\"pin\", count, true)}></Button></Link>) : (null)}\n\n    </React.Fragment>)\n}","import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Button from \"../Button\";\nimport SavedItemCounter from \"./SavedItemsCounter\";\nimport SaveButton from \"../SaveButton\";\n\n/**\n * Not really a bread crumb menu. \n * @param {Object} props \n */\nexport default function BreadCrumb(props) {\n\n    const HomeButton = withRouter(props => {\n\n        return props.location.pathname === \"/\" ? (null) :\n            <Link className=\"HomeButton\" to=\"/\">\n                <Button text=\"home\"></Button>\n            </Link>\n    });\n\n    const id = props.id;\n    const saveType = props.saveType || \"invalid\";\n\n    return (\n        <nav className=\"BreadCrumb\">\n            <div className=\"breadcrumb-left\">\n                <HomeButton />\n                <SavedItemCounter />\n            </div>\n            <SaveButton id={id} type={saveType}></SaveButton>\n        </nav>\n    )\n}","import BreadCrumb from \"../BreadCrumb\";\nimport React from \"react\";\n\n/**\n * Wrap a page's top matter with the navigation buttons.\n * Should this be raised up to the CitationDB index? \n * Probably. But this is to accommodate keeping the \n * nav tray inside the DOM element that contains the\n * site's top matter for style and structure purposes.\n * \n * @param {PageComponent} Component \n * @param {id, saveType} props \n */\nexport default function TopWrapper(Component, props) {\n    return (\n        <div className=\"top-matter-wrapper\">\n            <div className=\"top-matter-inner column-wrapper\">\n                <BreadCrumb {...props} />\n                <section className=\"top-matter\">\n                    {Component}\n                </section>\n            </div>\n        </div>\n\n    )\n}\n","import React from \"react\";\nimport \"./style/main.scss\";\nimport pluralize from \"pluralize\";\n\nexport default function BigNumber(props) {\n    return (\n        <div className={`BigNumber ${props.label}`}>\n            <div className=\"number\">\n                {props.value}\n            </div>\n            <div className=\"label\">{pluralize(props.label, props.value)}</div>\n        </div>\n\n    )\n}\n","import React from 'react';\nimport ResultList from \"../ResultList\";\nimport Data from \"../Data\";\nimport SearchArea from \"./SearchArea\";\nimport PublicationHistogram from \"../PublicationHistogram\";\nimport TopWrapper from \"../TopWrapper\";\nimport BigNumber from \"../BigNumber\";\n\n\nexport default class HomePage extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            searchTerm: \"\",\n            toggles: {\n                resource: true,\n                publication: true,\n                author: true\n            }\n        }\n\n        this.toggleFactory = this.toggleFactory.bind(this);\n        this.setSearchTerm = this.setSearchTerm.bind(this);\n    }\n\n    setSearchTerm(term) {\n        this.setState({ searchTerm: term })\n    }\n\n    toggleFactory(label) {\n        return () => {\n\n            let newState = {\n                ...this.state,\n                toggles: { ...this.state.toggles }\n            }\n            newState.toggles[label] = !this.state.toggles[label];\n            this.setState(newState);\n        }\n    }\n\n    render() {\n        const items = Data.search(this.state);\n        const counts = Data.summarize.countByType(items);\n        return (\n            <div className=\"HomePage\">\n\n                {TopWrapper(\n                    <React.Fragment>\n                        <div className=\"left\">\n                            <PublicationHistogram\n                                items={items}\n                            />\n\n                        </div>\n                        <div className=\"right\">\n                            <div className=\"bignumber-tray\">\n                                <BigNumber label=\"testimonies\" value={counts.resource} />\n                                <BigNumber label=\"publications\" value={counts.publication} />\n                                <BigNumber label=\"authors\" value={counts.author} />\n\n                            </div>\n                        </div>\n                    </React.Fragment>\n                    , { id: null })}\n\n                <SearchArea\n                    callback={this.setSearchTerm}\n                    value={this.state.searchTerm}\n                    toggles={Object.keys(this.state.toggles).map(t => {\n                        return {\n                            label: t + \"s\",\n                            handler: this.toggleFactory(t),\n                            status: this.state.toggles[t]\n                        }\n                    })}\n                ></SearchArea>\n                <section className=\"column-wrapper\">\n                    <ResultList\n                        items={items}>\n                    </ResultList>\n                </section>\n\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Data from \"../Data\";\nimport ResultList from \"../ResultList\";\nimport uniqueArray from \"../Data/utils/uniqueArray\";\nimport { Link } from \"react-router-dom\";\nimport TopWrapper from \"../TopWrapper\";\nimport BigNumber from \"../BigNumber\";\nimport pluralize from \"pluralize\";\n\nimport config from \"../config\";\n\nexport default class PublicationPage extends React.Component {\n\n    render() {\n        const id = this.props.match.params.id,\n            item = Data.publication.byId(id),\n\n            // refactored to support multiple authors\n            // authors = [Data.author.byId(item[\"author.id\"])],\n            authors = item[\"author.id\"].map(authorID => Data.author.byId(authorID)),\n\n            footnotes = Data.footnote.byPublication(id);\n\n        const footnoteCount = footnotes.length,\n            resourceCount = uniqueArray(Data.resource.inFootnotes(footnotes).map(x => x.id)).length;\n\n        return (\n            <div className=\"PublicationPage\">\n                {TopWrapper(\n                    <React.Fragment>\n                        <div className=\"left\">\n                            <h1 className=\"title\">{item.title}</h1>\n                            <div className=\"chunk\">\n                                {authors.map((author, k) =>\n                                    <span key={k} className=\"metadata\">\n                                        <Link to={`/authors/${author.id}`}>{author.name ? `${author.name}` : (null)}</Link>\n                                        {\"; \"}\n                                    </span>\n                                )}\n\n                                <span className=\"metadata\">\n                                    {item.publisher ? `${item.publisher}` : (null)}\n                                </span>\n\n                                <span className=\"metadata light\">\n                                    {item.date ? `, ${item.date}` : (null)}\n                                </span>\n                            </div>\n                            <div className=\"metadata light\">\n                                {item.uri ? <a rel=\"noopener noreferrer\" target=\"_blank\" href={item.uri}>Publication page</a> : (null)}\n\n                            </div>\n\n                            <div className=\"summary\">\n                                <p>\n                                    This publication cites <span className=\"stat\">{resourceCount} {pluralize(config.words.resource.singular, resourceCount)}</span>\n                                    {\" \"}in the <span className=\"stat\">{footnoteCount} {pluralize(\"citation\", footnoteCount)}</span> listed below.\n                                </p>\n                            </div>\n\n                        </div>\n                        <div className=\"right\">\n                            <div className=\"bignumber-tray\">\n                                <BigNumber label=\"citations\" value={footnoteCount}></BigNumber>\n                                <BigNumber label={config.words.resource.plural} value={resourceCount}></BigNumber>\n                            </div>\n                        </div>\n                    </React.Fragment>, { id, saveType: \"publication\" })\n                }\n                <section className=\"column-wrapper\">\n                    <ResultList items={footnotes}></ResultList>\n                </section>\n            </div >\n\n        )\n    }\n\n}","import React from 'react';\nimport Data from \"../Data/index\";\nimport { Page404 } from \"../ErrorPages/index\";\nimport PublicationHistogram from \"../PublicationHistogram\";\nimport TopWrapper from \"../TopWrapper\";\nimport ResultList from \"../ResultList\";\nimport BigNumber from \"../BigNumber\";\nimport Button from \"../Button\";\nimport pluralize from \"pluralize\";\n\nimport config from \"../config\";\n\nexport default class ResourcePage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        const id = this.props.match.params.id;\n        const r = Data.resource.dictionary()[id];\n\n        if (!r) {\n            return Page404(this.props.location.pathname);\n        }\n\n        const publications = Data.publication.byResource(id);\n        const footnotes = Data.footnote.byResource(id);\n\n        console.log(\"Footnotes\", footnotes);\n\n        return (\n            <div className=\"ResourcePage\">\n                {TopWrapper(\n                    <React.Fragment>\n                        <div className=\"left\">\n                            <h1 className=\"title\">{r.title}</h1>\n                            <div className=\"chunk metadata\">\n                                {r.id}\n                            </div>\n\n                            <div className=\"view-button-container\">\n                                <a href={Data.utils.getResourceLink(r)}> <Button text=\"View\"></Button></a>\n                            </div>\n\n\n                            <div className=\"summary\">\n                                <p>\n                                    This {config.words.resource.singular} has been cited <span className=\"stat\">{footnotes.length} {pluralize(\"time\", footnotes.length)}</span>\n                                    {\" \"}in the <span className=\"stat\">{publications.length} {pluralize(\"publication\", publications.length)}</span> listed below.\n                                </p>\n                            </div>\n\n\n                        </div>\n                        <div className=\"right\">\n                            <PublicationHistogram items={publications}></PublicationHistogram>\n                            <div className=\"bignumber-tray\">\n                                <BigNumber label=\"citations\" value={footnotes.length}></BigNumber>\n                                <BigNumber label=\"publications\" value={publications.length}></BigNumber>\n                            </div>\n                        </div>\n                    </React.Fragment>, { id, saveType: \"resource\" }\n                )}\n\n                <section className=\"column-wrapper\">\n                    <ResultList items={publications} />\n                </section>\n\n            </div>\n        );\n    }\n\n}\n","import React from 'react';\nexport default function (location) {\n    return (\n        <div>\n            <h1>No match found for '{location}'</h1>\n            <p>This is a 404</p>\n        </div>\n    );\n}","import React from 'react';\nimport Data from \"../Data\";\nimport ResultList from \"../ResultList\";\nimport TopWrapper from \"../TopWrapper\";\nimport BigNumber from \"../BigNumber\";\nimport uniqueArray from \"../Data/utils/uniqueArray\";\nimport pluralize from \"pluralize\";\n\nimport config from \"../config\";\n\n/**\n * Author page, rendered at /authors/:id\n */\nexport default class AuthorPage extends React.Component {\n\n    render() {\n\n        const id = this.props.match.params.id,\n            item = Data.publication.byId(id),\n            author = Data.author.byId(item.id),\n            publications = Data.publication.byAuthor(id),\n            footnotes = Data.footnote.byAuthor(id),\n            resourceCount = uniqueArray(Data.resource.inFootnotes(footnotes).map(x => x.id)).length;\n\n        return (\n            <div className=\"PublicationPage\">\n\n                {TopWrapper(\n                    <React.Fragment>\n                        <div className=\"left\">\n                            <h1 className=\"title\">{author.name}</h1>\n                            <div>{author.uri.length > 0 ? <a href={author.uri}>Author website</a>: (null)}</div>\n                            <div className=\"summary\">\n                                <p>\n                                    This author has made <span className=\"stat\">{footnotes.length} {pluralize(\"citation\", footnotes.length)}</span> \n                                    {\" \"}to <span className=\"stat\">{resourceCount} {pluralize(config.words.resource.singular, resourceCount)}</span> \n                                    {\" \"}in the <span className=\"stat\">{publications.length} {pluralize(\"publication\", publications.length)}</span> listed below.\n                                </p>\n                            </div>\n\n                        </div>\n                        <div className=\"right\">\n                            <div className=\"bignumber-tray\">\n                                <BigNumber\n                                    label=\"publications\"\n                                    labelSingular=\"publication\"\n                                    value={publications.length} />\n                                <BigNumber\n                                    label=\"citations\"\n                                    labelSingular=\"citation\"\n                                    value={footnotes.length} />\n                                <BigNumber\n                                    label={config.words.resource.plural}\n                                    labelSingular={config.words.resource.singular}\n                                    value={resourceCount} />\n\n\n                            </div>\n                        </div>\n                    </React.Fragment>,\n                    { id, saveType: \"author\" }\n                )}\n\n                <section className=\"column-wrapper\">\n                    <ResultList\n                        items={publications}\n                    />\n                </section>\n\n            </div>\n        )\n    }\n}","import React from \"react\";\n\n/**\n * Wrap a page with some generic stuff\n * @param {Component} PageComponent \n */\nexport default function GenericPage(PageComponent) {\n\n    return (props) => {\n        return (\n            <div className=\"GenericPage\">\n                <PageComponent {...props}></PageComponent>\n            </div>\n        );\n    }\n}","import {\n    getSavedAuthors, getSavedPublications, getSavedResources, subscribe, unsubscribe\n} from \"../SavedItemStorage\"\nimport React from \"react\";\nimport ResultList from \"../ResultList\";\nimport TopWrapper from \"../TopWrapper\";\nimport BigNumber from \"../BigNumber\";\n\nexport default class SavedItemsPage extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            publications: getSavedPublications(),\n            authors: getSavedAuthors(),\n            resources: getSavedResources()\n        }\n\n        this.updateCounts = this.updateCounts.bind(this);\n    }\n\n    componentDidMount() {\n        subscribe(\"saved-items-page\", this.updateCounts);\n    }\n\n    componentWillUnmount() {\n        unsubscribe(\"saved-items-page\");\n    }\n\n    updateCounts() {\n        let publications = getSavedPublications();\n        let authors = getSavedAuthors();\n        let resources = getSavedResources();\n\n        this.setState({\n            publications,\n            authors,\n            resources\n        });\n    }\n\n\n\n    render() {\n\n        const resources = this.state.resources,\n            authors = this.state.authors,\n            publications = this.state.publications;\n\n        console.log(resources);\n        console.log(authors);\n        console.log(publications);\n\n        return (\n            <div className=\"SavedItemPage\">\n\n                {TopWrapper(\n                    <React.Fragment>\n                        <div className=\"left\">\n                            <h1 className=\"title\">Your pinned items</h1>\n                            <p>\n                                These items are stored temporarily in your browser.\n                                They will not be saved after you close the browser window or tab.\n                            </p>\n                        </div>\n                        <div className=\"right\">\n                            <div className=\"bignumber-tray\">\n                                <BigNumber\n                                    label=\"testimonies\"\n                                    value={resources.length}\n                                />\n                                <BigNumber\n                                    label=\"publications\"\n                                    value={publications.length}\n                                />\n                                <BigNumber\n                                    label=\"authors\"\n                                    value={authors.length}\n                                />\n                            </div>\n                        </div>\n                    </React.Fragment>, {})\n\n                }\n\n                <section className=\"column-wrapper\">\n                    <ResultList items={resources}></ResultList>\n\n                    <ResultList items={publications}></ResultList>\n                    <ResultList items={authors}></ResultList>\n                </section>\n\n\n\n            </div>\n\n        )\n    }\n\n}","import React from 'react';\nimport Data from \"./Data\";\n\nimport HomePage from \"./HomePage\";\nimport PublicationPage from \"./PublicationPage\";\nimport ResourcePage from \"./ResourcePage\";\nimport AuthorPage from \"./AuthorPage\";\nimport GenericPage from \"./GenericPage\";\nimport SavedItemsPage from \"./SavedItemsPage\";\n\n// import { HashRouter as Router, Route } from \"react-router-dom\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport \"./style/main.scss\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n        this.dataHasLoaded = this.dataHasLoaded.bind(this);\n\n        // very crude, but works. pool all four data objects\n        // until they are loaded\n        let loadCounter = 0;\n        let failCounter = 20;\n        let interval = setInterval(() => {\n            loadCounter += 1\n\n            let loadedCount = 0;\n            const tables = [Data.author, Data.publication, Data.footnote, Data.resource];\n\n            tables.forEach(table => {\n                if (table.hasLoaded() === true) { loadedCount++; }\n            })\n\n            if (loadedCount === tables.length) {\n                this.dataHasLoaded();\n                clearInterval(interval);\n            } else {\n                console.log(\"Data has not completely loaded yet \" + loadCounter)\n                failCounter--;\n                if (failCounter <= 0){\n                    console.log(\"Bailing X(\")\n                    clearInterval(interval)\n                }\n            }\n        }, 10);\n    }\n\n    componentDidMount() {\n        console.log(\"Component mounted.\")\n        // let deferredPrompt;\n        window.addEventListener('beforeinstallprompt', (e) => {\n            // Stash the event so it can be triggered later.\n            // deferredPrompt = e;\n            // Update UI notify the user they can add to home screen\n\n            console.log(\"Can install\")\n            e.prompt()\n            // window.showInstallPromotion();\n            // console.log(\"Can install\", e);\n            console.log(e.prompt)\n        });\n\n    }\n\n    dataHasLoaded() {\n        this.setState({ loaded: true })\n    }\n\n    render() {\n\n        if (!this.state.loaded) { return <div>Loading...</div> }\n\n        return (\n            <div className=\"CitationDB\">\n                <Router basename=\"/\">\n                    <Route path=\"/\" component={GenericPage(HomePage)} exact />\n\n                    <Route\n                        path=\"/publications/:id\"\n                        render={(props) => GenericPage(PublicationPage)({ saveType: \"publication\", ...props })}\n                    />\n\n                    <Route\n                        path=\"/resources/:id\"\n                        render={(props) => GenericPage(ResourcePage)({ saveType: \"resource\", ...props })}\n                    />\n\n                    <Route\n                        path=\"/authors/:id\"\n                        render={(props) => GenericPage(AuthorPage)({ saveType: \"author\", ...props })}\n                    />\n\n                    <Route\n                        path=\"/pins\"\n                        component={GenericPage(SavedItemsPage)}\n                    />\n                </Router>\n            </div>\n        );\n    }\n}\n\n\n","import React from 'react';\nimport CitationDB from \"./CitationDB\";\nimport SiteBanner from \"@bit/jakekara.metadash.site-banner\";\nimport {fortunize} from \"@bit/jakekara.metadash.fortunoff-app\";\n\n\nfunction App() {\n\n  const FortunizedApp = fortunize(CitationDB)\n\n  return (\n    <div className=\"App\">\n        <SiteBanner></SiteBanner>\n        <FortunizedApp></FortunizedApp>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  console.log(\"Registering service worker\")\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}