(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){},39:function(e,t,n){e.exports=n(95)},44:function(e,t,n){},79:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"yearCounts",function(){return S}),n.d(a,"countByType",function(){return P});var r=n(0),i=n.n(r),c=n(30),o=n.n(c),l=n(16),s=n(1),u=n(2),m=n(4),h=n(3),p=n(6),d=n(5);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return Object.keys(e).map(function(n){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e[n]);return a[t]=n,a})},v=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(Object(s.a)(this,e),this.loaded=!1,this.headerKey=a.bind(this),this.typeKey=r.bind(this),this.resourceDictionary=t,this.resourceArray=f(t),this.all=this.all.bind(this),this.dictionary=this.dictionary.bind(this),this.byId=this.byId.bind(this),this.filter=this.filter.bind(this),this.find=this.find.bind(this),this.handleData=this.handleData.bind(this),this.fireWhenLoaded=i.bind(this),this.hasLoaded=this.hasLoaded.bind(this),t.hasOwnProperty("fetch-data-url")){var c=t["fetch-data-url"];fetch(c).then(function(e){return e.json()}).then(function(e){return n.handleData(e)},function(e){console.error("Error loading data "+c,e)})}else this.handleData(t)}return Object(u.a)(e,[{key:"hasLoaded",value:function(){return this.loaded}},{key:"handleData",value:function(e){var t=this;Object.keys(e).forEach(function(n){var a=e[n];a.id=n,a.__header=t.headerKey(a),a.__type=t.typeKey(a)}),this.resourceDictionary=e,this.resourceArray=f(e),this.loaded=!0,this.fireWhenLoaded()}},{key:"dictionary",value:function(){return this.resourceDictionary}},{key:"all",value:function(){return this.resourceArray}},{key:"byId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=Object.assign({},this.dictionary()[e]);return n[t]=e,n}},{key:"filter",value:function(e){return this.all().filter(e)}},{key:"find",value:function(e){var t=this.filter(e);if(1===t.length)return t[0];if(t.length<1)throw new Error("Error: More than one result found matching criteria");if(t.length>0)throw new Error("Error: No results found")}}]),e}(),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=[];return e.filter(function(e){var a=t(e);return e?!(n.indexOf(a)>=0)&&(n.push(a),!0):null})},O=new(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e,function(e){return e.title},function(e){return"publication"}))).byAuthor=n.byAuthor.bind(Object(p.a)(n)),n.inFootnotes=n.inFootnotes.bind(Object(p.a)(n)),n.byResource=n.byResource.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"byAuthor",value:function(e){return this.filter(function(t){return t["author.id"]===e})}},{key:"inFootnotes",value:function(e){var t=this;return y(e.map(function(e){return t.byId(e["publication.id"])}))}},{key:"byResource",value:function(e){return this.inFootnotes(g.byResource(e))}}]),t}(v))({"fetch-data-url":"data/publication.json"}),j={publication:"publication",author:"author",footnote:"footnote",resource:"resource"},g=new(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e,function(e){return O.byId(e["publication.id"])},function(e){return j.footnote}))).byPublication=n.byPublication.bind(Object(p.a)(n)),n.byAuthor=n.byAuthor.bind(Object(p.a)(n)),n.byResource=n.byResource.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"byPublication",value:function(e){return this.filter(function(t){return t["publication.id"]===e})}},{key:"byResource",value:function(e){return this.filter(function(t){return t["resource.id"]===e})}},{key:"byAuthor",value:function(e){var t=this,n=[];return O.byAuthor(e).forEach(function(e){n=n.concat(t.byPublication(e.id))}),n}}]),t}(v))({"fetch-data-url":"data/footnote.json"}),E=new(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e,function(e){return e.title},function(e){return"resource"}))).citedByAuthor=n.citedByAuthor.bind(Object(p.a)(n)),n.inFootnotes=n.inFootnotes.bind(Object(p.a)(n)),n.byPublication=n.byPublication.bind(Object(p.a)(n)),n.citedByAuthor=n.citedByAuthor.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"inFootnotes",value:function(e){var t=this;return y(e.map(function(e){return t.byId(e["resource.id"])}))}},{key:"byPublication",value:function(e){return this.inFootnotes(g.byPublication(e))}},{key:"citedByAuthor",value:function(e){return this.inFootnotes(g.byAuthor(e))}}]),t}(v))({"fetch-data-url":"data/resource.json"}),k=new v({"fetch-data-url":"data/author.json"},function(e){return e.name},function(e){return j.author}),w=n(38),N=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).dict={},n.ks=[],n.add=n.add.bind(Object(p.a)(n)),n.addArray=n.addArray.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"add",value:function(e,t){t||(t=e),this.ks.indexOf(String(e))>=0||(this.dict[e]=t,this.ks=Object.keys(this.dict),this.push(t))}},{key:"addArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=0;n<e.length;n++)this.add(t(e[n]),e[n])}}]),t}(Object(w.a)(Array));function S(e){var t={};return e.forEach(function(e){Number(e.date)&&4===String(e.date).length&&(t[e.date]||(t[e.date]={count:0,label:e.date}),t[e.date].count+=1)}),t=Object.keys(t).map(function(e){return t[e]})}function P(e){var t={publication:0,footnote:0,resource:0,author:0};return e.forEach(function(e){t[e.__type]||(t[e.__type]=0),t[e.__type]+=1}),t}var C={author:k,footnote:g,publication:O,resource:E,search:function(e){var t=(e=e||{}).toggles||{},n=e.searchTerm||"",a=new N;function r(e,a,r){return!0!==t[e]?[]:r.filter(function(e){var t=a(e);return n.trim().length<1||!!t&&!!(t.toLowerCase().indexOf(n.toLowerCase())>=0)})}return a.addArray(r("author",function(e){return e.name},k),function(e){return"author."+e.id}),a.addArray(r("publication",function(e){return k.byId(e["author.id"]).name},O),function(e){return"publication."+e.id}),a.addArray(r("resource",function(e){return e.title},E),function(e){return"resource."+e.id}),a.addArray(r("publication",function(e){return e.title},O),function(e){return"publication."+e.id}),a},summarize:a},I=n(9),A=(n(25),n(44),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{onClick:this.props.onClick,className:"Button"},this.props.text)}}]),t}(i.a.Component)),D=localStorage,T={};function _(){try{D.setItem("canary",Date.now()),D.removeItem("canary")}catch(e){return!1}return!0}function F(e){return"yale-fortunoff-cdb-"+e}function x(e){if(!_())return[];var t=D.getItem(F(e));if(!t)return[];try{return JSON.parse(t)}catch(n){return[]}}function L(e,t){_()&&(D.setItem(F(e),JSON.stringify(t)),Object.keys(T).forEach(function(e){return T[e]()}))}function B(e,t){T[e]=t}function R(e,t){var n=x(e);n.indexOf(t)>=0||(n.push(t),L(e,n))}function H(e,t){L(e,x(e).filter(function(e){return e!==t}))}var W={resource:"resource",publication:"publication",author:"author"};function M(){return x(W.author).map(function(e){return C.author.byId(e)})}function U(){return x(W.publication).map(function(e){return C.publication.byId(e)})}function z(){return x(W.resource).map(function(e){return C.resource.byId(e)})}function J(e){R(W.resource,e)}function K(e){R(W.publication,e)}function Y(e){R(W.author,e)}function G(e){H(W.resource,e)}function V(e){H(W.publication,e)}function $(e){H(W.author,e)}var q=function(e){function t(e){var n;if(Object(s.a)(this,t),"resource"===(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).props.type)n.saveItem=J,n.removeItem=G,n.getSavedItems=z;else if("author"===n.props.type)n.saveItem=Y,n.removeItem=$,n.getSavedItems=M;else{if("publication"!==n.props.type)return Object(m.a)(n);n.saveItem=K,n.removeItem=V,n.getSavedItems=U}return n.isSaved=n.isSaved.bind(Object(p.a)(n)),n.state={isSaved:n.isSaved()},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"isSaved",value:function(){return this.getSavedItems().map(function(e){return e.id}).indexOf(this.props.id)>=0}},{key:"setSaved",value:function(){this.setState({isSaved:this.isSaved()})}},{key:"render",value:function(){var e=this;return["publication","author","resource"].indexOf(this.props.type)<0?null:i.a.createElement("div",{className:"SaveButton ".concat(this.state.isSaved?"unsave":"save")},this.isSaved()?i.a.createElement(A,{onClick:function(){e.removeItem(e.props.id),e.setSaved()},text:"unpin"}):i.a.createElement(A,{onClick:function(){e.saveItem(e.props.id),e.setSaved()},text:"pin"}))}}]),t}(i.a.Component),Q=n(13),X=n.n(Q),Z=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"pill-tray-wrapper ".concat(this.props.title)},i.a.createElement("div",{className:"pill-tray"},i.a.createElement("div",{className:"pill-tray-title"},this.props.items.length," ",this.props.title),this.props.items.slice(0,5).map(function(e,t){return i.a.createElement("div",{key:t,className:"pill"},i.a.createElement(I.b,{to:e.link},e.title))})))}}]),t}(i.a.Component),ee=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.type+"s";if(this.props.type===j.footnote){var t=this.props.item,n=C.resource.byId(this.props.item["resource.id"]);return i.a.createElement("div",{className:"HeaderLink"},i.a.createElement("div",null,n.title," ",t.start_time?"@".concat(t.start_time):null))}return i.a.createElement(I.b,{to:"/".concat(e,"/").concat(this.props.item.id)},this.props.header)}}]),t}(i.a.Component),te=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ItemHeader"},i.a.createElement("div",{className:"badge result-type"},"[",this.props.type,"]")," ",i.a.createElement(ee,this.props))}}]),t}(i.a.Component),ne=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,this.props.item.text?'"'.concat(this.props.item.text,'"'):null,i.a.createElement("div",null,i.a.createElement("span",{className:"metadata light"},this.props.item.chapter?"".concat(this.props.item.chapter,", "):null),i.a.createElement("span",{className:"metadata light"},this.props.item.page?"page ".concat(this.props.item.page," "):null)))}}]),t}(i.a.Component),ae=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=C.publication.byAuthor(this.props.item.id),t=C.resource.citedByAuthor(this.props.item.id);return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(Z,{title:X()("publications",e.length),items:e.map(function(e){return{title:e.title,link:"/publications/".concat(e.id)}})})),i.a.createElement("div",null,i.a.createElement(Z,{title:X()("resource",t.length)+" cited",items:t.map(function(e){return{title:e.title,link:"/resources/".concat(e.id)}})})))}}]),t}(i.a.Component),re=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=C.footnote.byResource(this.props.item.id),t=C.publication.inFootnotes(e);return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("span",{className:"metadata light"},this.props.item.id)),i.a.createElement("div",null,i.a.createElement(Z,{title:X()("publication",t.length),items:t.map(function(e){return{title:e.title,link:"/publications/".concat(e.id)}})})))}}]),t}(i.a.Component),ie=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.item,t=C.author.byId(this.props.item["author.id"])||{},n=C.resource.byPublication(this.props.item.id);return i.a.createElement("div",null,i.a.createElement("div",null,t.name?i.a.createElement("span",{className:"metadata"},i.a.createElement(I.b,{to:"/authors/".concat(t.id)},t.name)):null,e.publisher?i.a.createElement("span",{className:"metadata light"},", ",e.publisher):null,e.date?i.a.createElement("span",{className:"metadata light"},", ",e.date):null),i.a.createElement("div",null,i.a.createElement(Z,{title:X()("testimony",n.length)+" cited",items:n.map(function(e){return{title:e.title,link:"/resources/".concat(e.id)}})})))}}]),t}(i.a.Component),ce=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return"author"===this.props.type?i.a.createElement(ae,this.props):"publication"===this.props.type?i.a.createElement(ie,this.props):"resource"===this.props.type?i.a.createElement(re,this.props):"footnote"===this.props.type?i.a.createElement(ne,this.props):i.a.createElement("div",{className:"Footer"})}}]),t}(i.a.Component),oe=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ResultListItem ".concat(this.props.type)},i.a.createElement("div",{className:"content-area"},i.a.createElement("header",null,i.a.createElement(te,this.props)),i.a.createElement("footer",null,i.a.createElement(ce,this.props))),"footnote"===this.props.type?i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.props.item.uri},i.a.createElement(A,{text:"View"})):null,i.a.createElement(q,{type:this.props.type,id:this.props.item.id}))}}]),t}(i.a.Component),le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={itemCount:25,step:10},n.loadMore=n.loadMore.bind(Object(p.a)(n)),n.trackScrolling=n.trackScrolling.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"decideToIncrement",value:function(e){this.props.items.length>this.state.itemCount&&e<100&&this.loadMore()}},{key:"trackScrolling",value:function(){var e=window.pageYOffset+window.innerHeight,t=window.document.body.offsetHeight-e;this.decideToIncrement(t)}},{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.trackScrolling)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.trackScrolling)}},{key:"loadMore",value:function(){var e=this.state.itemCount+this.state.step;this.setState({itemCount:e})}},{key:"render",value:function(){var e=this.props.items.sort(function(e,t){return e.__header>t.__header?1:-1}).map(function(e,t){return i.a.createElement(oe,{key:t,item:e,type:e.__type,header:e.__header})}).slice(0,this.state.itemCount);return i.a.createElement("div",{className:"ResultList"},e)}}]),t}(i.a.Component),se=n(33),ue=(n(79),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{onClick:this.props.handleClick,className:"ToggleButton ".concat(this.props.label," ").concat(this.props.status?"on":"off")},i.a.createElement(A,{text:this.props.label}))}}]),t}(i.a.Component)),me=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("section",{className:"SearchArea column-wrapper"},i.a.createElement(se.TextInput,{callback:this.props.callback,value:this.props.value,placeholder:"Search by author, publication title or testimony..."})),i.a.createElement("section",{className:"toggle-box column-wrapper"},i.a.createElement("div",{className:"label"}),this.props.toggles.map(function(e,t){return i.a.createElement(ue,{key:t,handleClick:e.handler,label:e.label,status:e.status})})))}}]),t}(i.a.Component),he=n(34),pe=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=C.summarize.yearCounts(this.props.items.filter(function(e){return"publication"===e.__type}));return e.length<1?null:i.a.createElement("div",{className:"PublicationHistogram"},i.a.createElement(he.Histogram,{data:e,minYear:1980,maxYear:2020,margin:{top:10,left:30,right:10,bottom:20}}),i.a.createElement("h6",{className:"center"},"Publications by year"))}}]),t}(i.a.Component),de=n(14),be=n(37),fe=function(){var e=function(){return M().length+U().length+z().length},t=Object(r.useState)(e()),n=Object(be.a)(t,2),a=n[0],c=n[1];return B("counter",function(){c(e())}),i.a.createElement(i.a.Fragment,null,a>0?i.a.createElement(I.b,{className:"PinsButton",to:"/pins"},i.a.createElement(A,{text:X()("pin",a,!0)})):null)};function ve(e){var t=Object(de.e)(function(e){return"/"===e.location.pathname?null:i.a.createElement(I.b,{className:"HomeButton",to:"/"},i.a.createElement(A,{text:"home"}))}),n=e.id,a=e.saveType||"invalid";return i.a.createElement("nav",{className:"BreadCrumb"},i.a.createElement("div",{className:"breadcrumb-left"},i.a.createElement(t,null),i.a.createElement(fe,null)),i.a.createElement(q,{id:n,type:a}))}function ye(e,t){return i.a.createElement("div",{className:"top-matter-wrapper"},i.a.createElement("div",{className:"top-matter-inner column-wrapper"},i.a.createElement(ve,t),i.a.createElement("section",{className:"top-matter"},e)))}n(87);function Oe(e){return i.a.createElement("div",{className:"BigNumber ".concat(e.label)},i.a.createElement("div",{className:"number"},e.value),i.a.createElement("div",{className:"label"},X()(e.label,e.value)))}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ee=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={searchTerm:"",toggles:{resource:!0,publication:!0,author:!0}},n.toggleFactory=n.toggleFactory.bind(Object(p.a)(n)),n.setSearchTerm=n.setSearchTerm.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"setSearchTerm",value:function(e){this.setState({searchTerm:e})}},{key:"toggleFactory",value:function(e){var t=this;return function(){var n=ge({},t.state,{toggles:ge({},t.state.toggles)});n.toggles[e]=!t.state.toggles[e],t.setState(n)}}},{key:"render",value:function(){var e=this,t=C.search(this.state),n=C.summarize.countByType(t);return i.a.createElement("div",{className:"HomePage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement(pe,{items:t})),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"testimonies",value:n.resource}),i.a.createElement(Oe,{label:"publications",value:n.publication}),i.a.createElement(Oe,{label:"authors",value:n.author})))),{id:null}),i.a.createElement(me,{callback:this.setSearchTerm,value:this.state.searchTerm,toggles:Object.keys(this.state.toggles).map(function(t){return{label:t+"s",handler:e.toggleFactory(t),status:e.state.toggles[t]}})}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:t})))}}]),t}(i.a.Component),ke=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id,t=C.publication.byId(e),n=[C.author.byId(t["author.id"])],a=C.footnote.byPublication(e),r=a.length,c=y(C.resource.inFootnotes(a).map(function(e){return e.id})).length;return i.a.createElement("div",{className:"PublicationPage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},t.title),i.a.createElement("div",{className:"chunk"},n.map(function(e,t){return i.a.createElement("span",{key:t,className:"metadata"},i.a.createElement(I.b,{to:"/authors/".concat(e.id)},e.name?"".concat(e.name):null),"; ")}),i.a.createElement("span",{className:"metadata"},t.publisher?"".concat(t.publisher):null),i.a.createElement("span",{className:"metadata light"},t.date?", ".concat(t.date):null)),i.a.createElement("div",{className:"metadata light"},t.uri?i.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.uri},"Publication page"):null)),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"citations",value:r}),i.a.createElement(Oe,{label:"testimonies",value:c})))),{id:e,saveType:"publication"}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:a})))}}]),t}(i.a.Component),we=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props.match.params.id,n=C.resource.dictionary()[t];if(!n)return e=this.props.location.pathname,i.a.createElement("div",null,i.a.createElement("h1",null,"No match found for '",e,"'"),i.a.createElement("p",null,"This is a 404"));var a=C.publication.byResource(t),r=C.footnote.byResource(t);return console.log("Footnotes",r),i.a.createElement("div",{className:"ResourcePage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},n.title),i.a.createElement("div",{className:"chunk metadata"},n.id)),i.a.createElement("div",{className:"right"},i.a.createElement(pe,{items:a}),i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"citations",value:r.length}),i.a.createElement(Oe,{label:"publications",value:a.length})))),{id:t,saveType:"resource"}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:a})))}}]),t}(i.a.Component),Ne=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id,t=C.publication.byId(e),n=C.author.byId(t.id),a=C.publication.byAuthor(e),r=C.footnote.byAuthor(e);return i.a.createElement("div",{className:"PublicationPage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},n.name)),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"publications",labelSingular:"publication",value:a.length}),i.a.createElement(Oe,{label:"citations",labelSingular:"citation",value:r.length})))),{id:e,saveType:"author"}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:a})))}}]),t}(i.a.Component);function Se(e){return function(t){return i.a.createElement("div",{className:"GenericPage"},i.a.createElement(e,t))}}var Pe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={publications:U(),authors:M(),resources:z()},n.updateCounts=n.updateCounts.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){B("saved-items-page",this.updateCounts)}},{key:"componentWillUnmount",value:function(){T["saved-items-page"]=function(){}}},{key:"updateCounts",value:function(){var e=U(),t=M(),n=z();this.setState({publications:e,authors:t,resources:n})}},{key:"render",value:function(){var e=this.state.resources,t=this.state.authors,n=this.state.publications;return console.log(e),console.log(t),console.log(n),i.a.createElement("div",{className:"SavedItemPage"},ye(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"left"},i.a.createElement("h1",{className:"title"},"Your pinned items"),i.a.createElement("p",null,"These items are stored temporarily in your browser. They will not be saved after you close the browser window or tab.")),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"bignumber-tray"},i.a.createElement(Oe,{label:"testimonies",value:e.length}),i.a.createElement(Oe,{label:"publications",value:n.length}),i.a.createElement(Oe,{label:"authors",value:t.length})))),{}),i.a.createElement("section",{className:"column-wrapper"},i.a.createElement(le,{items:e}),i.a.createElement(le,{items:n}),i.a.createElement(le,{items:t})))}}]),t}(i.a.Component);n(88);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ae=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},n.dataHasLoaded=n.dataHasLoaded.bind(Object(p.a)(n));var a=0,r=setInterval(function(){a+=1;var e=0,t=[C.author,C.publication,C.footnote,C.resource];t.forEach(function(t){!0===t.hasLoaded()&&e++}),e===t.length?(n.dataHasLoaded(),clearInterval(r)):console.log("Data has not completely loaded yet "+a)},10);return n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("Component mounted."),window.addEventListener("beforeinstallprompt",function(e){console.log("Can install"),e.prompt(),console.log(e.prompt)})}},{key:"dataHasLoaded",value:function(){this.setState({loaded:!0})}},{key:"render",value:function(){return this.state.loaded?i.a.createElement("div",{className:"CitationDB"},i.a.createElement(I.a,{basename:"/"},i.a.createElement(de.a,{path:"/",component:Se(Ee),exact:!0}),i.a.createElement(de.a,{path:"/publications/:id",render:function(e){return Se(ke)(Ie({saveType:"publication"},e))}}),i.a.createElement(de.a,{path:"/resources/:id",render:function(e){return Se(we)(Ie({saveType:"resource"},e))}}),i.a.createElement(de.a,{path:"/authors/:id",render:function(e){return Se(Ne)(Ie({saveType:"author"},e))}}),i.a.createElement(de.a,{path:"/pins",component:Se(Pe)}))):i.a.createElement("div",null,"Loading...")}}]),t}(i.a.Component),De=n(35),Te=n.n(De),_e=n(36);var Fe=function(){var e=Object(_e.fortunize)(Ae);return i.a.createElement("div",{className:"App"},i.a.createElement(Te.a,null),i.a.createElement(e,null))},xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Le(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(Fe,null),document.getElementById("root")),function(e){if(console.log("Registering service worker"),"serviceWorker"in navigator){if(new URL("/fortunoff-citationdb",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/fortunoff-citationdb","/service-worker.js");xe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Le(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Le(t,e)})}}()}},[[39,1,2]]]);
//# sourceMappingURL=main.88071825.chunk.js.map