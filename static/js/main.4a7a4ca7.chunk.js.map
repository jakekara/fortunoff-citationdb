{"version":3,"sources":["CitationDB/Data/dictToArray.js","CitationDB/Data/BasicAPIEndpoint.js","CitationDB/Data/utils/uniqueArray.js","CitationDB/Data/publication.js","CitationDB/Data/enums.js","CitationDB/Data/footnote.js","CitationDB/Data/resource.js","CitationDB/Data/author.js","CitationDB/Data/utils/FussyArray.js","CitationDB/Data/summarize.js","CitationDB/Data/index.js","CitationDB/Button/index.js","CitationDB/SavedItemStorage/index.js","CitationDB/SaveButton/index.js","CitationDB/ResultList/ResultListItem/index.js","CitationDB/ResultList/index.js","CitationDB/ToggleButton/index.js","CitationDB/HomePage/SearchArea.js","CitationDB/PublicationHistogram/index.js","CitationDB/HomePage/index.js","CitationDB/PublicationPage/index.js","CitationDB/ResourcePage/index.js","CitationDB/ErrorPages/Page404.js","CitationDB/AuthorPage/index.js","CitationDB/BreadCrumb/SavedItemsCounter.js","CitationDB/BreadCrumb/index.js","CitationDB/GenericPage/index.js","CitationDB/SavedItemsPage/index.js","CitationDB/index.js","App.js","serviceWorker.js","index.js"],"names":["dictToArray","obj","keyField","arguments","length","undefined","Object","keys","map","key","ret","_objectSpread","BasicAPIEndpoint","headerKey","x","typeKey","classCallCheck","this","forEach","k","o","resourceDictionary","resourceArray","all","bind","dictionary","byId","filter","find","id","assign","f","matches","Error","uniqueArray","arr","loaded","kx","indexOf","push","Data_publication","PublicationAPIEndPoint","props","_this","possibleConstructorReturn","getPrototypeOf","call","_","byAuthor","assertThisInitialized","inFootnotes","byResource","authorId","footnotes","_this2","resourceId","footnote","require","entity","publication","author","resource","FootnoteAPIEndpoint","byPublication","publicationId","concat","Data_resource","ResourceAPIEndpoint","citedByAuthor","Data_author","FussyArray","_getPrototypeOf2","_len","items","Array","_key","apply","dict","ks","add","addArray","value","String","keyFunc","i","yearCounts","item","Number","date","count","label","countByType","__type","Data","search","options","toggles","searchTerm","results","searchEntity","field","api","fofx","trim","toLowerCase","name","summarize","ToggleButton","react_default","a","createElement","onClick","className","text","React","Component","storage","localStorage","callbacks","hasStorage","setItem","Date","now","removeItem","_unused","listID","type","getList","getItem","JSON","parse","_unused2","setList","stringify","c","addItem","getSavedAuthors","getSavedPublications","getSavedResources","saveResource","savePublication","saveAuthor","removeResource","removePublication","removeAuthor","SaveButton","saveItem","getSavedItems","isSaved","state","setState","Button_ToggleButton","setSaved","PillTray","title","slice","react_router_dom","to","link","HeaderLink","term","header","ItemHeader","ResultListItem_HeaderLink","FootnoteFooter","AuthorFooter","publications","resources","ResultListItem_PillTray","ResourceFooter","PublicationFooter","publisher","Footer","ResultListItem_AuthorFooter","ResultListItem_PublicationFooter","ResultListItem_ResourceFooter","ResultListItem_FootnoteFooter","ResultListItem","ResultListItem_ItemHeader","ResultListItem_Footer","target","href","uri","SaveButton_SaveButton","ResultList","itemCount","step","loadMore","trackScrolling","distanceFromBottom","scrollBottom","window","pageYOffset","innerHeight","document","body","offsetHeight","decideToIncrement","addEventListener","removeEventListener","sort","b","__header","ResultListItem_ResultListItem","handleClick","status","dist","callback","placeholder","t","ToggleButton_ToggleButton","handler","jakekara_metadash_viz_dist","data","minYear","maxYear","margin","top","left","right","bottom","HomePage","toggleFactory","setSearchTerm","newState","HomePage_objectSpread","_this3","counts","PublicationHistogram_default","SearchArea_default","ResultList_ResultList","PublicationPage","match","params","footnoteCount","resourceCount","ResourcePage","location","r","pathname","AuthorPage","console","log","SavedItemsCounter","getCurrentCount","_useState","useState","_useState2","slicedToArray","setCount","Fragment","BreadCrumb","HomeButton","withRouter","GenericPage","PageComponent","saveType","SavedItemsPage","authors","basename","react_router","path","component","exact","render","CitationDB_objectSpread","App","FortunizedApp","fortunize","CitationDB","jakekara_metadash_site_banner_dist_default","Boolean","hostname","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.4a7a4ca7.chunk.js","sourcesContent":["export default function(obj, keyField=\"id\"){\n\n    return Object.keys(obj).map( key => {\n\n        let ret = {\n            ...obj[key],\n        }\n\n        ret[keyField] = key;\n\n        return ret;\n    });\n}","import dictToArray from \"./dictToArray\";\n\nexport default class BasicAPIEndpoint{\n\n    /**\n     * @constructor\n     * @alias Data.BasicAPIEndpoint\n     * @param {Object} obj \n     */\n    constructor(obj, headerKey=x=>{}, typeKey=x=>{}){\n\n        // insert a a\n        Object.keys(obj).forEach(k=>{\n            let o = obj[k];\n            o[\"id\"] = k\n            o[\"__header\"] = headerKey(o);\n            o[\"__type\"] = typeKey(o);\n        });\n\n        this.resourceDictionary = obj;\n        this.resourceArray = dictToArray(obj);\n\n        this.all = this.all.bind(this);\n        this.dictionary = this.dictionary.bind(this);\n        this.byId = this.byId.bind(this);\n        this.filter = this.filter.bind(this);\n        this.find = this.find.bind(this);\n    }\n    \n    /**\n     * Get a dictionary index of all items\n     * @memberof Data.BasicAPIEndpoint\n     */\n    dictionary(){ \n        return this.resourceDictionary;\n    }\n\n    /**\n     * Get an array of all items\n     * @memberof Data.BasicAPIEndpoint\n     */\n    all(){ \n        return this.resourceArray;\n    }\n\n    /**\n     * Find one item by id or undefined\n     * @param {string} id \n     * @memberof Data.BasicAPIEndpoint\n     */\n    byId(id, keyField=\"id\"){\n        let ret = Object.assign({}, this.dictionary()[id]);\n        \n        // insert the id \n        ret[keyField] = id;\n        return ret;\n    }\n\n    /**\n     * Get an array of all items i for which f(i) returns True\n     * @param {function} f \n     * @memberof Data.BasicAPIEndpoint\n     */\n    filter(f){\n        return this.all().filter(f);\n    }\n\n    /**\n     * Get item that matches f(i) if only one item matches f(i). Fail if multiple items return true\n     * @param {function} f \n     * @memberof Data.BasicAPIEndpoint\n     */\n    find(f){\n\n        const matches = this.filter(f);\n\n        if (matches.length === 1){ return matches[0]}\n\n        if (matches.length < 1){\n            throw new Error (\"Error: More than one result found matching criteria\");\n        }\n        else if (matches.length > 0){\n            throw new Error(\"Error: No results found\");\n        }\n    }\n\n}","export default function (arr, key=x=>x) {\n    const loaded = [];\n    const ret =  arr\n        .filter(x => { // x is a footnote\n            const kx = key(x)\n            if (!x) { return }\n            if (loaded.indexOf(kx) >= 0) {\n                return false;\n            }\n            loaded.push(kx);\n            return true;\n        });\n    return ret;\n}         ","import BasicAPIEndpoint from \"./BasicAPIEndpoint\";\nimport footnote from \"./footnote\";\n// import resource from \"./resource\";\nimport uniqueArray from \"./utils/uniqueArray\";\n\n/** \n * Adds a byAuthor search convenience method\n * @class Data.PublicationAPIEndpoint\n * @extends Data.BasicAPIEndpoint\n */\nclass PublicationAPIEndPoint extends BasicAPIEndpoint {\n\n    /**\n     * @constructor\n     * @alias Data.PublicationAPIEndpoint\n     * @param {Object} props \n     */\n    constructor(props){\n        super(props, x=>x[\"title\"], _=>\"publication\");\n\n        this.byAuthor = this.byAuthor.bind(this);\n        this.inFootnotes = this.inFootnotes.bind(this);\n        this.byResource = this.byResource.bind(this)\n    }\n\n    /**\n     * Get publications by a given author\n     * @param {string} authorId \n     * @returns {Array}\n     * @method Data.PublicationAPIEndpoint#byAuthor\n     */\n    byAuthor(authorId){\n        return  this.filter(x=>x[\"author.id\"] === authorId)\n    }\n\n    \n    inFootnotes(footnotes){\n        return uniqueArray(\n            footnotes.map(x => this.byId(x[\"publication.id\"]))\n        )\n    }\n\n    /**\n     * Get publications that cite a given resource\n     */\n    byResource(resourceId){\n        return this.inFootnotes(footnote.byResource(resourceId))\n\n        // let ret = [];\n        // footnotes.forEach(f => {\n        //     if (ret.indexOf(f) >= 0){ return }\n        //     ret.push(f)\n        // })\n        // return ret;\n    }\n\n}\n\n/**\n * @memberof module:Data\n * @alias publication\n * @type {Data.PublicationAPIEndpoint}\n */\nexport default new PublicationAPIEndPoint(require(\"./json/publication.json\"));","// entity types\n\nconst entity = {\n    publication: \"publication\",\n    author: \"author\",\n    footnote: \"footnote\",\n    resource: \"resource\"\n};\n\nexport default entity;","import BasicAPIEndpoint from \"./BasicAPIEndpoint\";\nimport publication from \"./publication\";\nimport entity from \"./enums\";\n\n/**\n * @class Data.FootnoteAPIEndpoint\n * @extends Data.BasicAPIEndpoint\n */\nclass FootnoteAPIEndpoint extends BasicAPIEndpoint{\n    constructor(props){\n        super(props, x=>publication.byId(x[\"publication.id\"]), _=>entity.footnote);\n        this.byPublication = this.byPublication.bind(this);\n        this.byAuthor = this.byAuthor.bind(this);\n    }\n\n    /**\n     * Get a list of footnotes for a given publication\n     * @returns {Array}\n     * @param {string} publicationId \n     */\n    byPublication(publicationId){\n        return this.filter(x => x[\"publication.id\"] === publicationId);\n    }\n\n    /**\n     * Get a list of footnotes for a given resource\n     * @param {string} resourceId \n     * @returns {Array}\n     */\n    byResource(resourceId){\n        return this.filter(x => x[\"resource.id\"] === resourceId);\n    }\n\n    /**\n     * Get all of an author's footnotes\n     * @param {string} authorId \n     * @returns {Array}\n     */\n    byAuthor(authorId){\n        let ret = []\n        \n        publication.byAuthor(authorId)\n            .forEach(x=> {\n                ret = ret.concat(this.byPublication(x[\"id\"]));\n            });\n            \n        return ret;\n    }\n\n}\n\n/**\n * @memberof module:Data\n * @alias footnote\n * @type {Data.FootnoteAPIEndpoint}\n */\nexport default new FootnoteAPIEndpoint(require(\"./json/footnote.json\"));","import BasicAPIEndpoint from \"./BasicAPIEndpoint\";\n// import publication from \"./publication\";\nimport footnote from \"./footnote\";\nimport uniqueArray from \"./utils/uniqueArray\";\n\n/**\n * Adds conveninece functions for resources\n * @class Data.ResourceAPIEndpoint\n * @extends Data.BasicAPIEndpoint\n */\nclass ResourceAPIEndpoint extends BasicAPIEndpoint {\n    constructor(props) {\n        super(props, x=>x[\"title\"], _=>\"resource\");\n\n        this.citedByAuthor = this.citedByAuthor.bind(this);\n        this.inFootnotes = this.inFootnotes.bind(this);\n        this.byPublication = this.byPublication.bind(this);\n        this.citedByAuthor = this.citedByAuthor.bind(this);\n    }\n\n    /**\n     * Get all of the resources referenced in a given collection of footnotes\n     * @param {Array} footnotes \n     */\n    inFootnotes(footnotes) {\n\n        return uniqueArray(\n            footnotes\n            .map(x => {\n                return this.byId(x[\"resource.id\"])\n            })\n        )\n        // const loaded = [];\n        // return footnotes\n        //     .map(x => {\n        //         return this.byId(x[\"resource.id\"])\n        //     })\n        //     .filter(x => { // x is a footnote\n        //         if (!x) { return }\n        //         if (loaded.indexOf(x[\"title\"]) >= 0) {\n        //             return false;\n        //         }\n        //         loaded.push(x[\"title\"]);\n        //         return true;\n        //     })\n    }\n\n    /**\n     * Return all of the resources in a given publication\n     * @param {string} publicationId \n     */\n    byPublication(publicationId) {\n        return this.inFootnotes(footnote.byPublication(publicationId));\n    }\n\n    /**\n     * Return all of the resources cited by an author\n     * @param {string} authorId \n     */\n    citedByAuthor(authorId) {\n\n        return this.inFootnotes(footnote.byAuthor(authorId));\n\n    }\n\n}\n/**\n * @memberof module:Data\n * @alias resource\n * @type {Data.ResourceAPIEndpoint}\n */\nexport default new ResourceAPIEndpoint(require(\"./json/resource.json\"));","\nimport BasicAPIEndpoint from \"./BasicAPIEndpoint\";\nimport entity from \"./enums\";\n\n/**\n * @memberof module:Data\n * @alias author\n * @type {Data.BasicAPIEndpoint}\n */\nexport default new BasicAPIEndpoint(require(\"./json/author.json\"), x=>x[\"name\"], x=>entity.author);","export default class FussyArray extends Array {\n\n    constructor(...items){\n        super(...items);\n        this.dict = {};\n        this.ks = [];\n        this.add = this.add.bind(this);\n        this.addArray = this.addArray.bind(this);\n    }\n\n    add(key, value){\n        if (!value){ value = key}\n        if (this.ks.indexOf(String(key)) >= 0){ return; }\n        this.dict[key] = value;\n        this.ks = Object.keys(this.dict);\n        this.push(value);\n    }\n\n    addArray(arr, keyFunc=x=>x){\n        for (var i = 0; i < arr.length; i++){\n            this.add(keyFunc(arr[i]), arr[i]);\n        }\n    }\n\n}","function yearCounts(items){\n    var ret = {};\n    items.forEach(item => {\n        if (Number(item.date) && (String(item.date).length === 4)) {\n            if (!ret[item.date]) { ret[item.date] = { count: 0, label: item.date } }\n            ret[item.date].count += 1;\n        }\n    })\n    ret = Object.keys(ret).map(k => ret[k]);\n    return ret;\n}\n\nfunction countByType(items){\n    let ret = {\n        publication:0,\n        footnote:0,\n        resource:0,\n        author:0\n    }\n    items.forEach(item=>{\n        if(!ret[item.__type]){ ret[item.__type] = 0 }\n        ret[item.__type] += 1;\n    })\n    return ret;\n}\n\nexport {\n    yearCounts,\n    countByType\n}","/** \n * Data API\n * \n * @module Data\n * @exports Data.author\n */\nimport resource from \"./resource\";\nimport footnote from \"./footnote\";\nimport publication from \"./publication\";\nimport author from \"./author\";\nimport uniqueArray from \"./utils/uniqueArray\";\nimport FussyArray from \"./utils/FussyArray\";\nimport * as summarize from \"./summarize\";\n\n/**\n * Search authors, publications and resources\n * @param {Object} options \n */\nfunction search(options) {\n\n    options = options || {};\n    const toggles = options.toggles || {};\n    const searchTerm = options.searchTerm || \"\";\n\n    // let added = [];\n    let results = new FussyArray();\n\n    function searchEntity(entity, field, api) {\n\n        if (toggles[entity] !== true) { return[]; }\n\n        return api.filter(x => {\n            // const tmpId = `entity.${x[\"id\"]}`;\n            const fofx = field(x);\n\n            // if (searchTerm.trim().length < 1){ return added.indexOf(tmpId) < 0 ; }\n\n            if (searchTerm.trim().length < 1){ return true ; }\n            if (!fofx) { return false }\n            const ret = fofx.toLowerCase().indexOf(searchTerm.toLowerCase()) >= 0;\n\n            if (ret){ //&& (added.indexOf(tmpId) < 0)){\n                // added = added.concat(tmpId);\n                // console.log(`Added ${tmpId}`)\n                return true;\n            }\n\n            return false;\n        })\n    }\n\n    results.addArray(searchEntity(\"author\", x=>x[\"name\"], author), x=>\"author.\" + x[\"id\"]);\n\n    // Search for publications by author\n    results.addArray(searchEntity(\"publication\", x=>author.byId(x[\"author.id\"]).name, publication), x=>\"publication.\" + x[\"id\"]);\n\n    results.addArray(searchEntity(\"resource\", x=>x[\"title\"], resource), x=>\"resource.\" + x[\"id\"])\n    results.addArray(searchEntity(\"publication\", x=>x[\"title\"], publication), x=>\"publication.\" + x[\"id\"])\n\n    //results = uniqueArray(results, x=>x[\"__type\"] + \".\" + x[\"id\"]);\n\n    return results;\n}\n\nexport default {\n    author,\n    footnote,\n    publication,\n    resource,\n    search,\n    summarize,\n}","import React from 'react';\nimport \"./style/main.scss\"\n\nexport default class ToggleButton extends React.Component {\n\n\n    render() {\n\n        return <div\n            onClick={this.props.onClick}\n            className=\"Button\">{this.props.text}\n        </div>\n    }\n}","import Data from \"../Data\";\n\n// Set local or session storage;\nconst storage = localStorage;\nlet callbacks = [];\n\nfunction hasStorage(){\n    try{\n        storage.setItem(\"canary\",Date.now())\n        storage.removeItem(\"canary\");\n    } catch {\n        return false;\n    }\n    return true;\n}\n\nfunction listID(type){ return \"yale-fortunoff-cdb-\" + type}\n\nfunction getList(type){\n    if (!hasStorage()){ return[]; }\n    const ret = storage.getItem(listID(type));\n    if (!ret){ return []}\n    try{\n        return JSON.parse(ret);\n    } catch {\n        return [];\n    }\n}\n\nfunction setList(type, arr){\n    if (!hasStorage()){ return; }\n    storage.setItem(listID(type), JSON.stringify(arr));\n    callbacks.forEach( c => c());\n}\n\nfunction subscribe(f){\n    callbacks.push(f)\n}\n\nfunction addItem(type, id){\n    let arr = getList(type);\n\n    if (arr.indexOf(id) >= 0){ return; }\n\n    arr.push(id);\n    setList(type, arr);\n}\n\nfunction removeItem(type, id){\n    let arr = getList(type).filter(x=> x!==id);\n    setList(type, arr);\n\n}\n\nconst key = {\n    resource:\"resource\",\n    publication:\"publication\",\n    author:\"author\"\n}\n\nfunction getSavedAuthors(){ return getList(key.author).map(id=>Data.author.byId(id))}\nfunction getSavedPublications(){ return getList(key.publication).map(id=>Data.publication.byId(id))}\nfunction getSavedResources(){ return getList(key.resource).map(id=>Data.resource.byId(id))}\n\nfunction saveResource(id){ addItem(key.resource, id)}\nfunction savePublication(id){ addItem(key.publication, id)}\nfunction saveAuthor(id){ addItem(key.author, id)}\n\nfunction removeResource(id){ removeItem(key.resource, id)}\nfunction removePublication(id){ removeItem(key.publication, id)}\nfunction removeAuthor(id){ removeItem(key.author, id)}\n\nexport {\n    getSavedAuthors,\n    getSavedPublications,\n    getSavedResources,\n    saveAuthor,\n    savePublication,\n    saveResource,\n    removeAuthor,\n    removePublication,\n    removeResource,\n    subscribe\n    \n}","import React from \"react\";\nimport Button from \"../Button\";\nimport * as storage from \"../SavedItemStorage\";\n\nexport default class SaveButton extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        if (this.props.type === \"resource\") {\n            this.saveItem = storage.saveResource;\n            this.removeItem = storage.removeResource;\n            this.getSavedItems = storage.getSavedResources;\n        } else if (this.props.type === \"author\") {\n            this.saveItem = storage.saveAuthor;\n            this.removeItem = storage.removeAuthor;\n            this.getSavedItems = storage.getSavedAuthors;\n        } else if (this.props.type === \"publication\") {\n            this.saveItem = storage.savePublication;\n            this.removeItem = storage.removePublication;\n            this.getSavedItems = storage.getSavedPublications;\n        } else {\n            // console.log(\"unknown page type\", this.props.type);\n            return;\n        }\n\n        this.isSaved = this.isSaved.bind(this);\n\n        this.state = {\n            isSaved: this.isSaved()\n        }\n\n    }\n\n    isSaved() {\n        return this.getSavedItems().map(x => x.id).indexOf(this.props.id) >= 0\n    }\n\n    setSaved() {\n        this.setState({ isSaved: this.isSaved() })\n    }\n\n    render() {\n        if ([\"publication\", \"author\", \"resource\"].indexOf(this.props.type) < 0){ return (null)}\n\n\n        return (<div className={`SaveButton ${this.state.isSaved ? \"unsave\" : \"save\"}`}>\n            {\n                this.isSaved() ?\n                    <Button onClick={() => { this.removeItem(this.props.id); this.setSaved() }} text=\"unpin\"></Button>\n                    :\n                    <Button onClick={() => { this.saveItem(this.props.id); this.setSaved() }} text=\"pin\"></Button>\n            }\n        </div>)\n\n    }\n}","import React from 'react';\nimport Data from \"../../Data\";\nimport { Link } from \"react-router-dom\";\nimport entity from \"../../Data/enums\";\nimport \"../style/main.scss\";\nimport Button from \"../../Button\";\nimport SaveButton from \"../../SaveButton\";\n\nclass PillTray extends React.Component {\n    render() {\n        return (\n            <div className={`pill-tray-wrapper ${this.props.title}`}>\n                <div className={`pill-tray-title`}>{this.props.items.length} {this.props.title}</div>\n\n                <div className=\"pill-tray\">\n                    {this.props.items.slice(0, 5).map((item, i) => {\n                        return (\n\n                            <div key={i} className=\"pill\">\n                                <Link to={item.link}>{item.title}</Link>\n                            </div>)\n                    })}\n                </div>\n            </div>\n\n        )\n    }\n}\n\nclass HeaderLink extends React.Component {\n\n    render() {\n        const term = this.props.type + \"s\";\n\n        if (this.props.type === entity.footnote) {\n            const f = this.props.item;\n            const resource = Data.resource.byId(this.props.item[\"resource.id\"]);\n            return (\n                <div className=\"HeaderLink\">\n                    <div>{resource.title} {f[\"start_time\"] ? `@${f[\"start_time\"]}` : (null)}</div>\n                </div>)\n        }\n\n        // Otherwise, it's pretty standard\n\n        return <Link\n            to={`/${term}/${this.props.item.id}`}\n        >{this.props.header}</Link>\n    }\n\n}\n\nclass ItemHeader extends React.Component {\n    render() {\n        return (\n            <div className=\"ItemHeader\">\n                <div className=\"badge result-type\">[{this.props.type}]</div>\n                {\" \"}<HeaderLink {...this.props}></HeaderLink>\n                {/* {\" \"}{this.props.type === \"resource\" ? <small>{this.props.item.id}</small> : (null)} */}\n            </div>\n        )\n    }\n}\n\nclass FootnoteFooter extends React.Component {\n\n    render() {\n        const publication = Data.publication.byId(this.props.item[\"publication.id\"]);\n\n        return (\n            <div>\n                {this.props.item.text}\n            </div>\n        )\n    }\n}\n\nclass AuthorFooter extends React.Component {\n    render() {\n        const publications = Data.publication.byAuthor(this.props.item.id);\n        const resources = Data.resource.citedByAuthor(this.props.item.id);\n        const footnotes = Data.footnote.byAuthor(this.props.item.id);\n        return (\n            <div>\n                <div>\n\n                {/* {resources.length} resources */}\n                <PillTray title=\"publications\" items={publications.map(x => { return { \"title\": x.title, \"link\": `/publications/${x.id}` } })} />\n                </div>\n                <div>\n                <PillTray title=\"resources cited\" items={resources.map(x => { return { \"title\": x.title, \"link\": `/resources/${x.id}` } })} />\n                </div>\n                {/* <div>\n                {footnotes.length} footnotes\n                </div> */}\n            </div>\n\n        );\n    }\n}\n\nclass ResourceFooter extends React.Component {\n    render() {\n\n        const footnotes = Data.footnote.byResource(this.props.item.id);\n        const publications = Data.publication.inFootnotes(footnotes)\n        return (\n            <div>\n                <div>\n                <PillTray title=\"publications\" items={publications.map(x => { return { \"title\": x.title, \"link\": `/publications/${x.id}` } })} />\n\n                {/* {footnotes.length > 1 ? `${footnotes.length} citations` : `${footnotes.length} citation`} */}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass PublicationFooter extends React.Component {\n    render() {\n        const publication = this.props.item;\n        const author = (Data.author.byId(this.props.item[\"author.id\"]) || {});\n        const resources = Data.resource.byPublication(this.props.item.id)\n        return (\n            <div>\n                <div>\n                    {author.name ? (<span><Link to={`/authors/${author.id}`}>{author.name}</Link></span>) : (null)}\n                    {publication.date ? (<span> // {publication.date}</span>) : (null)}\n                    {publication.publisher ? (<span> // {publication.publisher}</span>) : (null)}\n\n                </div>\n                <div>\n                    <PillTray title=\"resources cited\" items={resources.map(x => { return { \"title\": x.title, \"link\": `/resources/${x.id}` } })} />\n                </div>\n                {/* <div>\n                    {this.props.item.date ? this.props.item.date + \", \" : (null)}\n                    {this.props.item.publisher ? this.props.item.publisher : (null)}\n                </div> */}\n\n            </div>\n\n        );\n    }\n}\n\nclass Footer extends React.Component {\n    render() {\n        if (this.props.type === \"author\") { return <AuthorFooter {...this.props}></AuthorFooter>; };\n        if (this.props.type === \"publication\") { return <PublicationFooter {...this.props}></PublicationFooter>; };\n        if (this.props.type === \"resource\") { return <ResourceFooter {...this.props}></ResourceFooter>; };\n        if (this.props.type === \"footnote\") { return <FootnoteFooter {...this.props}></FootnoteFooter>; };\n        return (<div className=\"Footer\"></div>)\n    }\n}\n\nexport default class ResultListItem extends React.Component {\n    render() {\n        return (\n            <div className={`ResultListItem ${this.props.type}`}>\n                {/* <div className=\"left-end\"></div> */}\n                <div className=\"content-area\">\n                    <header>\n                        <ItemHeader {...this.props}></ItemHeader>\n                    </header>\n                    <footer>\n                        <Footer {...this.props}></Footer>\n                    </footer>\n                </div>\n                {\n                    this.props.type === \"footnote\" ? \n                    (<a target=\"_blank\" href={this.props.item.uri}>\n                        {/* <div className=\"button\"> view</div> */}\n                        <Button text=\"View\"></Button>\n                        </a>) \n                    : (null)\n                }\n                {\n                    <SaveButton type={this.props.type} id={this.props.item.id}/>\n                }\n            </div>\n        )\n    }\n}","import React from 'react';\nimport ResultListItem from \"./ResultListItem\";\n// import CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\nimport { Link } from \"react-router-dom\";\n\nimport \"./style/main.scss\";\n\nexport default class ResultList extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            itemCount:25,\n            step:10\n        }\n\n        this.loadMore = this.loadMore.bind(this);\n        this.trackScrolling = this.trackScrolling.bind(this);\n    }\n\n\n    decideToIncrement(distanceFromBottom){\n        if (this.props.items.length > this.state.itemCount\n            && distanceFromBottom < 100) {\n            this.loadMore();\n        }\n\n    }\n\n    trackScrolling() {\n\n        const scrollBottom = window.pageYOffset + window.innerHeight;\n        const distanceFromBottom = window.document.body.offsetHeight - scrollBottom;\n        this.decideToIncrement(distanceFromBottom);\n    }\n\n    componentDidMount() {\n        document.addEventListener(\"scroll\", this.trackScrolling);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"scroll\", this.trackScrolling);\n    }\n\n\n    loadMore(){\n        const itemCount = this.state.itemCount + this.state.step;\n        this.setState({itemCount});\n    }\n\n    render() {\n        const items = this.props.items.sort(\n            (a,b)=>{ return a.__header > b.__header ? 1 : -1}\n            ).map((x, i) => {\n                return <ResultListItem \n                key={i}\n                item={x}\n                type={x.__type}\n                header={x.__header}\n                ></ResultListItem>\n        }).slice(0, this.state.itemCount);\n        return (\n            <div className=\"ResultList\">\n                {items}\n               {/* <CSSTransitionGroup\n               transitionName=\"dialog\"\n               transitionEnterTimeout={10}\n               transitionLeaveTimeout={10}>\n                   {items}\n               </CSSTransitionGroup> */}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport \"./style/main.scss\"\nimport Button from \"../Button\";\n\nexport default class ToggleButton extends React.Component {\n    \n    render(){\n        return (\n        <a \n\n        onClick={this.props.handleClick} \n        className={`ToggleButton ${this.props.label} ${this.props.status ? \"on\" : \"off\"}`}>\n            <Button text={this.props.label}></Button>\n        </a>\n        )\n    }\n}","import React from 'react';\nimport { TextInput } from \"@bit/jakekara.metadash.inputs\";\nimport ToggleButton from \"../ToggleButton\";\n\nexport default class extends React.Component {\n    render() {\n        return (\n\n            <div>\n            <section className=\"SearchArea\">\n                <TextInput\n                    callback={this.props.callback}\n                    value={this.props.value}\n                    placeholder=\"Search\"\n                ></TextInput>\n            </section>\n            <section className=\"toggle-box\">\n                <div className=\"label\"></div>\n                {this.props.toggles.map((t,i)=> {\n                    return <ToggleButton\n                        key={i}\n                        handleClick={t.handler}\n                        label={t.label}\n                        status={t.status}\n                    ></ToggleButton>\n                })}\n\n            </section>\n            </div>\n        )\n    }\n}","import React from \"react\";\nimport { Histogram } from '@bit/jakekara.metadash.viz';\nimport Data from \"../Data\"\nexport default class extends React.Component {\n\n    render() {\n        return (\n            <div className=\"PublicationHistogram\">\n\n\n                <Histogram\n                    data={Data.summarize.yearCounts(\n                        this.props.items.filter(item => item.__type === \"publication\")\n                    )}\n                    minYear={1980}\n                    maxYear={2020}\n                    margin={{\n                        top: 10,\n                        left: 30,\n                        right: 10,\n                        bottom: 20\n                    }}\n                ></Histogram>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport ResultList from \"../ResultList\";\nimport Data from \"../Data\";\nimport SearchArea from \"./SearchArea\";\nimport PublicationHistogram from \"../PublicationHistogram\";\n\n\nexport default class HomePage extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            searchTerm: \"\",\n            toggles: {\n                resource: true,\n                publication: true,\n                author: true\n            }\n        }\n\n        this.toggleFactory = this.toggleFactory.bind(this);\n        this.setSearchTerm = this.setSearchTerm.bind(this);\n    }\n\n    setSearchTerm(term) {\n        this.setState({ searchTerm: term })\n    }\n\n    toggleFactory(label) {\n        return () => {\n\n            let newState = {\n                ...this.state,\n                toggles: { ...this.state.toggles }\n            }\n            newState.toggles[label] = !this.state.toggles[label];\n            this.setState(newState);\n        }\n    }\n\n    render() {\n        const items = Data.search(this.state);\n        const counts = Data.summarize.countByType(items);\n        return (\n            <div className=\"HomePage\">\n                <section className=\"prose\">\n                    Displaying <span className=\"stat\">{counts.publication} publications</span>\n                    {\" \"} by <span className=\"stat\">{counts.author} authors</span>\n                    {\" \"} citing <span className=\"stat\">{counts.resource} testimonies</span>.\n                </section>\n\n                <section className=\"module-box\">\n                    <h1 className=\"title\">Publications by year</h1>\n                    <PublicationHistogram\n                        items={items}\n                    ></PublicationHistogram>\n\n                </section>\n                <SearchArea\n                    callback={this.setSearchTerm}\n                    value={this.state.searchTerm}\n                    toggles={Object.keys(this.state.toggles).map(t => {\n                        return {\n                            label: t + \"s\",\n                            handler: this.toggleFactory(t),\n                            status: this.state.toggles[t]\n                        }\n                    })}\n                ></SearchArea>\n                <section>\n                    <ResultList\n                        items={items}>\n                    </ResultList>\n                </section>\n\n            </div>\n        )\n    }\n}","import React from 'react';\n// import ResultList from \"../ResultList\";\nimport Data from \"../Data\";\n// import FootnoteList from \"../FootnoteList\";\nimport ResultList from \"../ResultList\";\nimport uniqueArray from \"../Data/utils/uniqueArray\";\n\nexport default class PublicationPage extends React.Component {\n\n    render(){\n        const id = this.props.match.params.id,\n            item = Data.publication.byId(id),\n            author = Data.author.byId(item[\"author.id\"]),\n            footnotes = Data.footnote.byPublication(id);\n\n        const footnoteCount = footnotes.length,\n            resourceCount = uniqueArray(Data.resource.inFootnotes(footnotes).map(x => x.id)).length;\n\n        return (\n            <div className=\"PublicationPage\">\n\n                <section className=\"module-box\">\n\n                    <h1 className=\"title\">{item.title}</h1>\n                    <div>\n                        {author.name ? `by ${author.name}` : (null)}\n                    </div>\n                    <div>\n                        {item.date ? `${item.date}` : (null)} {item.publisher ? `, ${item.publisher}` : (null)}\n                    </div>\n\n\n                </section>\n                }\n                <section className=\"prose\">\n                    This publication contains <span className=\"stat\">{footnoteCount} citations</span>\n                    {resourceCount !== footnoteCount ? <span>{\" \"}to <span className=\"stat\">{resourceCount} testimonies</span> </span> : (null)}.\n                </section>\n\n\n                <section>\n                    {/* <FootnoteList footnotes={footnotes}></FootnoteList> */}\n                    <ResultList items={footnotes}></ResultList>\n                </section>\n            </div>\n\n        )\n    }\n\n}","import React from 'react';\nimport Data from \"../Data/index\";\nimport { Page404 } from \"../ErrorPages/index\";\nimport PublicationHistogram from \"../PublicationHistogram\";\n\n// import PublicationList from \"../PublicationList\";\n\nimport ResultList from \"../ResultList\";\n\nexport default class ResourcePage extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = {};\n        // this.isSaved = this.isSaved.bind(this);\n        // this.setSaved = this.setSaved.bind(this);\n    }\n\n    // isSaved(){\n    //     const id = this.props.match.params.id;\n    //     return getSavedResources().map(x=>x.id).indexOf(id) >= 0;\n    // }\n\n    render() {\n        const id = this.props.match.params.id;\n        const r = Data.resource.dictionary()[id];\n\n        if (!r) {\n            return Page404(this.props.location.pathname);\n        }\n\n        //const footnotes = Data.footnote.filter(item => item[\"resource.id\"] === id);\n        // const footnotes = Data.footnote.byResource(id)\n        const publications = Data.publication.byResource(id);\n\n        return (\n            <div className=\"ResourcePage\">\n\n                <section className=\"module-box\">\n                    <h1 className=\"title\">{r.title}</h1>\n                    <PublicationHistogram items={publications}></PublicationHistogram>\n\n                </section>\n                <section className=\"prose\">\n                    This testimony is cited in <span className=\"stat\">{publications.length} publications</span>.\n                </section>\n\n\n                <section className=\"module-box\">\n                </section>\n\n                {/* <FootnoteList footnotes={footnotes} /> */}\n                {/* <PublicationList publications={publications} /> */}\n                <section >\n                    <ResultList items={publications} />\n                </section>\n            </div>\n        );\n    }\n\n}\n","import React from 'react';\nexport default function (location) {\n    return (\n        <div>\n            <h1>No match found for '{location}'</h1>\n            <p>This is a 404</p>\n        </div>\n    );\n}","import React from 'react';\n// import ResultList from \"../ResultList\";\nimport Data from \"../Data\";\n// import PublicationList from \"../PublicationList\";\nimport ResultList from \"../ResultList\";\nimport SaveButton from \"../SaveButton\";\n\nexport default class AuthorPage extends React.Component {\n\n\n    render() {\n\n        const id = this.props.match.params.id,\n            item = Data.publication.byId(id),\n            author = Data.author.byId(item.id);\n        //     footnotes = Data.footnote.byPublication(id);\n\n        const publications = Data.publication.byAuthor(id)\n        console.log(item)\n        return (\n            <div className=\"PublicationPage\">\n                <section className=\"module-box\">\n                    <h1 className=\"title\">{author.name}</h1>\n                    <div>\n                    </div>\n                </section>\n\n                <section>\n                    <ResultList items={publications}></ResultList>\n                    {/* <PublicationList publications={publications}></PublicationList> */}\n                </section>\n            </div>\n\n        )\n    }\n}","import React, {useState} from \"react\";\nimport Button from \"../Button\";\n\nimport { getSavedAuthors, getSavedPublications, getSavedResources, subscribe } from \"../SavedItemStorage\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\n\n\nexport default function () {\n\n    const getCurrentCount = () => {\n        return getSavedAuthors().length + getSavedPublications().length + getSavedResources().length;\n    }\n    const [count, setCount] = useState(getCurrentCount());\n    \n    const updateCount = () => {\n        setCount(getCurrentCount());\n    }\n    subscribe(updateCount)\n\n    return (<React.Fragment>\n        {count > 0 ? (<Link className=\"PinsButton\" to=\"/pins\"><Button text={`${count} pins`}></Button></Link>) : (null)}\n\n    </React.Fragment>)\n}","import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Button from \"../Button\";\nimport SavedItemCounter from \"./SavedItemsCounter\";\nexport default function BreadCrumb(props) {\n\n    const HomeButton = withRouter(props => {\n\n        return props.location.pathname === \"/\" ? (null) :\n            <Link className=\"HomeButton\" to=\"/\">\n                <Button text=\"home\"></Button>\n            </Link>\n    });\n\n    return (\n        <nav className=\"BreadCrumb\">\n            <div className=\"tray\">\n                <HomeButton />\n                <SavedItemCounter />\n            </div>\n            {/* <span className=\"nav-item\">\n                \n            </span> */}\n        </nav>\n    )\n}","import React from \"react\";\nimport BreadCrumb from \"../BreadCrumb\";\nimport SaveButton from \"../SaveButton\";\n\nexport default function GenericPage(PageComponent) {\n\n\n    return (props) => {\n        const id = props.match.params.id\n\n        return (<div className=\"GenericPage\">\n            <section>\n                <BreadCrumb />\n\n                <div className=\"page-tray\">\n                    {\n                        props.saveType ?\n                            <React.Fragment>\n                                <SaveButton id={id} type={props.saveType}></SaveButton>\n                            </React.Fragment>\n                            : (null)\n                    }\n                </div>\n\n            </section>\n\n\n            <PageComponent {...props}></PageComponent>\n        </div>)\n    }\n}","import { getSavedAuthors, getSavedPublications, getSavedResources, subscribe } from \"../SavedItemStorage\"\nimport React from \"react\";\nimport ResultList from \"../ResultList\";\n\nexport default class SavedItemsPage extends React.Component {\n\n    render() {\n        let publications = getSavedPublications();\n        let authors = getSavedAuthors();\n        let resources = getSavedResources();\n\n        return (\n            <div className=\"SavedItemPage\">\n                <section className=\"prose\">\n                    You have pinned {\" \"}\n                    <span className=\"stat\">\n                        {authors.length} authors\n                    </span>,{\" \"} \n                    <span className=\"stat\">\n                    {publications.length} publications\n                    </span>\n                    {\" \"} and {\" \"} \n                    <span className=\"stat\">\n                        {resources.length} testimonies\n                    </span>\n                    .\n                </section>\n\n                <section>\n                <ResultList items={resources}></ResultList>\n\n                    <ResultList items={publications}></ResultList>\n                    <ResultList items={authors}></ResultList>\n                </section>\n\n\n\n            </div>\n\n        )\n    }\n\n}","import React from 'react';\nimport HomePage from \"./HomePage\";\nimport PublicationPage from \"./PublicationPage\";\nimport ResourcePage from \"./ResourcePage\";\nimport AuthorPage from \"./AuthorPage\";\nimport GenericPage from \"./GenericPage\";\nimport SavedItemsPage from \"./SavedItemsPage\";\n\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport \"./style/main.scss\";\n\nexport default class extends React.Component {\n    render() {\n\n        return (\n            <div className=\"CitationDB\">\n                <Router basename=\"/\">\n                    <Route path=\"/\" component={GenericPage(HomePage)}  exact />\n                    {/* <Route path=\"/publications/:id\" component={GenericPage(PublicationPage)} /> */}\n                    <Route path=\"/publications/:id\" render={(props) => GenericPage(PublicationPage)({saveType:\"publication\",...props})} />\n\n                    <Route path=\"/resources/:id\" render={(props) => GenericPage(ResourcePage)({saveType:\"resource\",...props})} />\n\n                    <Route path=\"/authors/:id\" render={(props) => GenericPage(AuthorPage)({saveType:\"author\",...props})} />\n                    <Route path=\"/pins\" component={GenericPage(SavedItemsPage)} />\n                </Router>\n            </div>\n        );\n    }\n}\n\n\n","import React from 'react';\nimport CitationDB from \"./CitationDB\";\nimport SiteBanner from \"@bit/jakekara.metadash.site-banner\";\nimport {fortunize} from \"@bit/jakekara.metadash.fortunoff-app\";\n\nfunction App() {\n\n  const FortunizedApp = fortunize(CitationDB)\n\n  return (\n    <div className=\"App\">\n        <SiteBanner></SiteBanner>\n        <FortunizedApp></FortunizedApp>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}